/* **********************************************
     Begin app.js
********************************************** */// initialize the app
function animateOutStatic(e,t){var n=getScope(e);n.aniOut();TweenMax.delayedCall(3,function(){n&&n.removeAll();t()})}function animateOutBook(e,t){console.log("naimateoutbook",getScope(currentPage).postdata);getScope(currentPage).postdata?animateOutStatic(e,t):TweenMax.delayedCall(.5,function(){animateOutBook(e,t)})}function animateSlideUpOut(e,t){var n=getScope(e);$(e).css({"z-index":100});TweenMax.to(e,3,{css:{top:"-150%",ease:Quint.easeInOut},onComplete:function(){n&&n.removeAll();t();$(e).css({"z-index":0})},ease:Expo.easeOut})}function animateStatic(e,t){$(e).css({"z-index":10});TweenMax.set(e,{autoAlpha:0});var n=getScope(e);n.aniIn();var r=0;n.aniInDelay&&(r=n.aniInDelay);firstLoad&&(r=0);TweenMax.to(e,.15,{css:{autoAlpha:1},delay:r,onComplete:function(){t()}})}function animateAlpha(e,t){TweenMax.set(e,{autoAlpha:0});getScope(e).aniIn();TweenMax.to(e,1.5,{css:{autoAlpha:1},ease:Quint.easeOut,onComplete:function(){t()}})}function animateSwipeIn(){done()}function randomNum(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function preventDefault(e){e=e||window.event;e.preventDefault&&e.preventDefault();e.returnValue=!1}function keydown(e){for(var t=keys.length;t--;)if(e.keyCode===keys[t]){preventDefault(e);return}}function wheel(e){preventDefault(e)}function disable_scroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",wheel,!1);window.onmousewheel=document.onmousewheel=wheel;document.onkeydown=keydown}function enable_scroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",wheel,!1);window.onmousewheel=document.onmousewheel=document.onkeydown=null}var murakamiApp=angular.module("murakamiApp",["ngRoute","ngAnimate","ngSanitize","angulartics","angulartics.google.analytics","ng.picturefill"]),directoryURL;murakamiApp.run(["$route","$rootScope","$location",function(e,t,n){t.dir=BlogInfo.url;directoryURL=t.dir;t.site=BlogInfo.site;t.api=AppAPI.url;t.siteVars;t.resourceNav;t.communityNav;t.bookList;t.locationPath;t.rdioAPI=t.dir+"/rdio/rdioProxy.php";t.buttonPartial=t.dir+"/partials/partial-button.html";t.nextBookPartial=t.dir+"/partials/partial-nextBook.html";t.footerPartial=t.dir+"/partials/partial-footer.php";t.backButtonPartial=t.dir+"/partials/partial-backbtn.php";t.excerptPartial=t.dir+"/partials/partial-excerpt.html";t.landingPageHeroPartial=t.dir+"/partials/partial-landingPageHero.html";t.subPageHeroPartial=t.dir+"/partials/partial-subPageHero.html";t.buttonNextArrow=t.dir+"/partials/partial-nextArrow.php";t.buttonPrevArrow=t.dir+"/partials/partial-prevArrow.php";t.formCountryPartial=t.dir+"/partials/partial-formSelectCountry.php";t.formCommunity=t.dir+"/partials/partial-communityForm.php";var r=n.path;n.path=function(i,s){if(s===!1)var o=e.current,u=t.$on("$locationChangeSuccess",function(){e.current=o;u()});return r.apply(n,[i])}}]);var currentPage,prevPage,prevPageType,siteVars,firstLoad=!0;murakamiApp.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:BlogInfo.url+"/homePage.php",controller:"HomePageController"}).when("/homepage_tile/:id",{templateUrl:BlogInfo.url+"/single-homepage_tile.php"}).when("/book_summary/:id",{templateUrl:BlogInfo.url+"/bookSummaryPage.php",controller:"SummaryPageController"}).when("/chapter_sample/:id",{templateUrl:BlogInfo.url+"/bookExcerptPage.php",controller:"ExcerptPageController"}).when("/book/:id",{templateUrl:BlogInfo.url+"/bookPage.php",controller:"BookPageController"}).when("/library",{templateUrl:BlogInfo.url+"/libraryPage.php",controller:"LibraryPageController"}).when("/resources",{templateUrl:BlogInfo.url+"/resourcesPage.php",controller:"ResourcesPageController"}).when("/page-resources",{templateUrl:BlogInfo.url+"/resourcesPage.php",controller:"ResourcesPageController"}).when("/community",{templateUrl:BlogInfo.url+"/communityPage.php",controller:"CommunityPageController"}).when("/resource_category/chapter_sample",{templateUrl:BlogInfo.url+"/resourcesExcerptPage.php",controller:"ResourcesExcerptPageController"}).when("/resource_category/chapter_sample/:loc",{templateUrl:BlogInfo.url+"/resourcesExcerptPage.php",controller:"ResourcesExcerptPageController"}).when("/resource_category/gallery",{templateUrl:BlogInfo.url+"/resourcesGalleryPage.php",controller:"ResourcesGalleryController"}).when("/resource_category/gallery/:id",{templateUrl:BlogInfo.url+"/resourcesGallerySubPage.php",controller:"ResourcesGallerySubController"}).when("/gallery/:id",{templateUrl:BlogInfo.url+"/resourcesGallerySubPage.php",controller:"ResourcesGallerySubController"}).when("/resource_category/playlist",{templateUrl:BlogInfo.url+"/resourcesMusicPage.php",controller:"ResourcesMusicController"}).when("/resource_category/playlist/:loc",{templateUrl:BlogInfo.url+"/resourcesMusicPage.php",controller:"ResourcesMusicController"}).when("/playlist/:loc",{templateUrl:BlogInfo.url+"/resourcesMusicPage.php",controller:"ResourcesMusicController"}).when("/resource_category/review",{templateUrl:BlogInfo.url+"/resourcesReviewPage.php",controller:"ResourcesReviewController"}).when("/resource_category/review/:loc",{templateUrl:BlogInfo.url+"/resourcesReviewPage.php",controller:"ResourcesReviewController"}).when("/review/:id",{templateUrl:BlogInfo.url+"/bookReviewPage.php",controller:"ReviewPageController"}).when("/resource_category/reading_guide",{templateUrl:BlogInfo.url+"/resourcesReadingGuidePage.php",controller:"ResourcesReadingGuideController"}).when("/resource_category/reading_guide/:loc",{templateUrl:BlogInfo.url+"/resourcesReadingGuidePage.php",controller:"ResourcesReadingGuideController"}).when("/reading_guide/:id",{templateUrl:BlogInfo.url+"/bookReadersGuidePage.php",controller:"ReadersGuidePageController"}).when("/resource_category/q_and_a",{templateUrl:BlogInfo.url+"/resourcesQAPage.php",controller:"ResourcesQAController"}).when("/resource_category/q_and_a/:loc",{templateUrl:BlogInfo.url+"/resourcesQAPage.php",controller:"ResourcesQAController"}).when("/q_and_a/:loc",{templateUrl:BlogInfo.url+"/resourcesQAPage.php",controller:"ResourcesQAController"}).when("/author",{templateUrl:BlogInfo.url+"/aboutPage.php",controller:"AboutPageController"}).when("/community_category/:id",{templateUrl:BlogInfo.url+"/communityStoryPage.php",controller:"CommunityStoryController"}).when("/resource_category/:id",{templateUrl:BlogInfo.url+"/resourcesGenericPage.php",controller:"ResourcesGenericController"});t.html5Mode(!0)}]);murakamiApp.animation(".page",function(){return{enter:function(e,t){prevPage=currentPage;currentPage=e;var n=getScope(e).aniInStyle;switch(n){case"static":animateStatic(e,t);break;case"staticUnder":$(e).css({"z-index":1});animateStatic(e,t);break;case"alpha":$(e).css({"z-index":100});animateStatic(e,t);break;case"default":slideUpOut(e,t)}firstLoad=!1},leave:function(e,t){var n=getScope(currentPage).aniOutStyle;getScope(e).pageType==getScope(currentPage).pageType&&(n="staticUnder");getScope(e).pageType=="home"&&(n="static");switch(n){case"static":$(e).css({"z-index":100});animateOutStatic(e,t);break;case"staticUnder":$(e).css({"z-index":1});getScope(e).pageType=="book"?animateOutBook(e,t):animateOutStatic(e,t);break;case"default":slideUpOut(e,t)}}}});var getScope=function(e){return angular.element(e).scope()};murakamiApp.controller("ResourcesReadingGuideController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){e.bookTitle=e.postdata.posts[l].title;e.bookLink=e.postdata.posts[l].acf.book.post_name;e.currentBody=e.postdata.posts[l].content;$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+l).addClass("active");h?e.$apply():s.path("resource_category/reading_guide/"+e.postdata.posts[l].slug,!1);h=!1}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(f,2,{css:{autoAlpha:1},ease:Quint.easeOut});if(r.loc){var t=0;angular.forEach(e.postdata.posts,function(e,n){e.slug==r.loc&&(t=n)});l=t}p()}e.aniInStyle="static";e.aniOutStyle="staticUnder";var u=s.path().split("/"),a=u[u.length-1];a="reading_guide";var f=$(".resourcesSub."+a);e.currentSlug=a;e.pageType="resources";e.postdata;var l=0,c=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:a,term_slug:a,count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});var h=!0;e.changeChapter=function(e,t){e.preventDefault();c=t;p()};e.changeBook=function(e,t){e.preventDefault();l=t;c=0;p()};e.aniIn=function(){TweenMax.set(f,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(f,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("HomePageController",["$scope","$http","$rootScope","$routeParams",function(e,t,n,r){function m(e){var t=String(e).replace(/<[^>]+>/gm,"");t=t.replace(/&#8221;/g,"").replace(/&#8220;/g,"").replace(/&#8217;/g,"â€™");t=encodeURIComponent(t);return t}function g(){u=e.panels[slideNum];h=!0;var t=$(".stagger");t.hide();$(".homeWrapper .btn").hide();$(".home .hometile").show();o=$(".textgallery .homeText");TweenMax.set(o,{autoAlpha:0});o.hide();c=o[slideNum];var n=new TimelineLite({delay:.5}),r=$(".stagger",c),i=new SplitText(r,{type:"words,chars"}),a=i.chars,f=a.length;r.show();$(c).show();n.pause();for(var l=0;l<f;l++)n.from(a[l],2.5,{opacity:0,ease:Quad.easeOut},Math.random()*.75);S($(".btn",c),"down");n.append(TweenMax.to(r,2.5,{onComplete:function(){}}));var p=$(s).height();TweenMax.set(s,{marginTop:-150,autoAlpha:0});n.insert(TweenMax.to(s,2.5,{css:{marginTop:0,autoAlpha:1},ease:Quint.easeOut,onStart:T}),1.5);n.play();TweenMax.to(c,1,{css:{autoAlpha:1}});C();TweenMax.delayedCall(1,function(){h=!1});$(".btnlines").removeClass("_animating")}function y(){if(h&&perc==-1)return;var e=$(".bg-tile",f),t=new TimelineLite({delay:.5});t.pause();var n=0,r=e.length;angular.forEach(e,function(i,s){var o=$(i),u=o.position().top,a=u+$(window).height()*.5;time=2;n=s*.15;r=(e.length-s)*.15;TweenMax.set(o,{top:a,height:0});t.insert(TweenMax.to(o,time,{css:{top:u,height:"50%"},ease:Quint.easeInOut,delay:r,onStart:function(){var e=$(window).width()/$(window).height();console.log("window ratio slideInBoxes",e);if(1.7>e){var t=$("img",o);t.css({height:$(window).height()+"px"})}}}));n=n+time+.35});t.play();TweenMax.delayedCall(n,N)}function b(){if(h)return;var e=$(".bg-tile",a),t=new TimelineLite({delay:.5});t.pause();var n=0,r=2;angular.forEach(e,function(e,i){var s=$(e),o=s.position().top,u=o+$(window).height()*.5;n=i*.15;t.insert(TweenMax.to(s,r,{css:{top:u,height:0},ease:Quint.easeInOut,delay:n,onStart:function(){var e=$(window).width()/$(window).height();console.log("window ratio slideOutBoxes",e);if(1.7>e){var t=$("img",s);t.css({height:$(window).height()+"px"})}}}));n=n+r+.35});t.play();TweenMax.delayedCall(n,N)}function w(e){$(l).show();TweenMax.to(l,1,{css:{autoAlpha:1}});var t=new TimelineLite({delay:.5}),n=$(".stagger",l),r=new SplitText(n,{type:"words,chars"}),i=r.chars,s=i.length;n.show();t.pause();for(var o=0;o<s;o++)t.from(i[o],1.75,{opacity:0,ease:Quad.easeOut},Math.random()*.75);S($(".btn",l),e);t.append(TweenMax.to(n,1.75,{onComplete:function(){}}));t.play()}function E(e){c=o[slideNum];var t=c,n=new TimelineLite,r=$(".stagger",c),i=new SplitText(r,{type:"words,chars"}),s=i.chars,u=s.length;n.pause();for(var a=0;a<u;a++)n.to(s[a],.5,{opacity:0,ease:Quint.easeOut},Math.random()*.25);TweenMax.to(t,1,{css:{autoAlpha:0}});n.append(TweenMax.to(r,.5,{onComplete:function(){r.hide();$(t).hide()}}));n.play();x($(".btn",c),e);TweenMax.delayedCall(1.25,function(){w(e)})}function S(e,t){var n=$(e),r=new TimelineLite({delay:1});n.show();$(n).addClass("_animating");angular.forEach($(".b",n),function(e,t){var n=$(e);if(n.hasClass("bt")||n.hasClass("bb")){TweenMax.set(n,{width:"0%"});r.insert(TweenMax.to(n,1.5,{css:{width:"100%"},ease:Expo.easeOut,onComplete:function(){n.css({width:"none"})}}))}else{TweenMax.set(n,{height:"0%"});r.insert(TweenMax.to(n,1.5,{css:{height:"100%"},ease:Expo.easeOut,onComplete:function(){n.css({height:"none"})}}))}});var i=-60;t=="up"&&(i=60);TweenMax.set($(".txt",n),{top:i});r.insert(TweenMax.to($(".txt",n),1.5,{css:{top:0},ease:Expo.easeOut,onComplete:function(){$(n).removeClass("_animating")}}));r.play()}function x(e,t){var n=$(e),r=new TimelineLite({delay:0});n.show();angular.forEach($(".b",n),function(e,t){var n=$(e);if(n.hasClass("bt")||n.hasClass("bb")){TweenMax.set(n,{width:"100%"});r.insert(TweenMax.to(n,.5,{css:{width:"0%"},ease:Quad.easeIn}))}else{TweenMax.set(n,{height:"100%"});r.insert(TweenMax.to(n,.5,{css:{height:"0%"},ease:Quad.easeIn}))}});var i=80;t=="up"&&(i=-80);$(n).addClass("_animating");r.insert(TweenMax.to($(".txt",n),1.5,{css:{top:i},ease:Expo.easeOut,onComplete:function(){}}));r.play()}function T(){var e=new TimelineMax({repeat:-1,yoyo:!0,delay:1.5});e.pause();var t=$(s).height(),n=0,r=15;e.append(TweenMax.to(s,1,{css:{marginTop:r},ease:Quad.easeIn}),.75);e.append(TweenMax.to(s,1,{css:{marginTop:n},ease:Quad.easeOut}));e.play()}function N(){angular.forEach(e.panels,function(e,t){var n=$(e),r=$(".bg-tile",n);angular.forEach(r,function(e,t){var n=$(e),r="0%";t>1&&(r="50%");TweenMax.to(n,0,{css:{top:r,height:"50%"}});var i=$("img",n);i.removeAttr("style")})});e.panels.removeClass("active");e.panels.removeClass("previous");e.panels.removeClass("current");var t=a,n=f,r=u;f=t;a=r;u=n;$(f).addClass("previous");$(u).addClass("active");$(a).addClass("current");h=!1;p.removeClass("active");e.setSlides()}function C(t){t||(t=0);e.themeColor=e.postdata[slideNum].acf.color_scheme;var r={color:e.themeColor,delay:t};n.$broadcast("homeTileChange",r);e.$apply();n.$broadcast("stopSound")}e.tl=new TimelineMax;e.tl.pause();e.aniInStyle="alpha";e.aniOutStyle="static";var i=$("#home"),s=$("._bounce",i);e.postdata;e.pageType="home";slideNum=0;e.panels=$(".boxgallery .panel");var o=$(".textgallery .homeText");e.currImg;e.prevImg;e.nextImg;e.themeColor="red";e.shareHeadline;e.shareDesc;e.shareLink;e.shareImg;e.facebookShare;var u=$(".active"),a=$(".current"),f=$(".previous"),l,c,h=!1,p=$(".nextBtn"),d={width:$(window).width(),height:$(window).height()};t({method:"GET",url:e.api,params:{json:"get_posts",post_type:"homepage_tile",count:"-1"}}).success(function(t,n,r,i){e.postdata=t.posts;e.setSlides();imagesLoaded("#boxgallery",function(){TweenMax.to($("#boxgallery"),2,{autoAlpha:1,ease:Expo.easeOut});TweenMax.delayedCall(.001,g)})}).error(function(e,t,n,r){});e.$on("scrollNext",function(t){e.nextPic()});e.$on("scrollPrev",function(t){e.prevPic()});e.$on("scrollingDown",function(e,t){});var v=!0;e.setSlides=function(){var t=slideNum+1;t>=e.postdata.length&&(t=0);var r=slideNum-1;r<0&&(r=e.postdata.length-1);if(!v)e.$apply(function(){angular.forEach(e.panels,function(n,i){var s=$(n);s.hasClass("current")&&(e[$(s).data("id")]=e.postdata[slideNum].acf.background_image.url);s.hasClass("active")&&(e[$(s).data("id")]=e.postdata[t].acf.background_image.url);s.hasClass("previous")&&(e[$(s).data("id")]=e.postdata[r].acf.background_image.url)});var i=e.postdata[slideNum].acf.button_link.permalink;e.postdata[slideNum].acf.button_path&&(i=e.postdata[slideNum].acf.button_path);e.shareLink=m(n.site+i);e.shareHeadline=m(e.postdata[slideNum].acf.headline);e.shareDesc=m(e.postdata[slideNum].acf.button_text);e.shareImg=e.postdata[slideNum].acf.background_image.url;e.postdata[slideNum].acf.share_image&&(e.shareImg=e.postdata[slideNum].acf.share_image.url);e.facebookShare=e.postdata[slideNum].url});else{e.currImg=e.postdata[slideNum].acf.background_image.url;e.prevImg=e.postdata[r].acf.background_image.url;e.nextImg=e.postdata[t].acf.background_image.url;var i=e.postdata[slideNum].acf.button_link.permalink;e.postdata[slideNum].acf.button_path&&(i=e.postdata[slideNum].acf.button_path);e.shareLink=m(n.site+i);e.shareHeadline=m(e.postdata[slideNum].acf.headline);e.shareDesc=m(e.postdata[slideNum].acf.button_text);e.shareImg=e.postdata[slideNum].acf.background_image.url;e.postdata[slideNum].acf.share_image&&(e.shareImg=e.postdata[slideNum].acf.share_image.url);e.facebookShare=e.postdata[slideNum].url}v=!1};e.nextPic=function(){if(h)return;p.addClass("active");b();E("down");slideNum++;slideNum>=e.postdata.length&&(slideNum=0);u=$(".active");l=o[slideNum];$(u).addClass("active");C(.5);h=!0};e.prevPic=function(){if(h)return;p.addClass("active");E("up");slideNum--;slideNum<0&&(slideNum=e.postdata.length-1);f=$(".previous");$(f).addClass("current");$(f).removeClass("previous");u=$(".active");u.removeClass("active");$(u).addClass("previous");$(a).removeClass("current");$(a).addClass("active");l=o[slideNum];y();C(2);h=!0};e.aniIn=function(){TweenMax.set($("#boxgallery"),{autoAlpha:0})};e.aniOut=function(){var e=$(".current .bg-tile",i);$(".homeWrapper .active").hide();$(".previous").hide();var t=new TimelineLite({delay:.5});t.pause();var r=0,u=1;angular.forEach(e,function(e,n){var i=$(e),s=i.position().left,o=s+$(window).width()*.5;TweenMax.set(i,{css:{left:s,width:"50%"}});r=n*.15;t.insert(TweenMax.to(i,u,{css:{left:o,width:0},ease:Quint.easeInOut,delay:r,onStart:function(){var e=$("img",i);e.css({height:e.css("height")})}}));r=r+u+.15});t.insert(TweenMax.to(s,1,{css:{marginTop:120,autoAlpha:0},ease:Quint.easeInOut}));t.play();c=o[slideNum];var a=c,f=new TimelineLite,l=$(".stagger",c),h=new SplitText(l,{type:"words,chars"}),p=h.chars,d=p.length;f.pause();for(var v=0;v<d;v++)f.to(p[v],.25,{opacity:0,ease:Quint.easeOut},Math.random()*.15);f.append(TweenMax.to(l,.5,{onComplete:function(){l.hide();$(a).hide()}}));f.play();x($(".btn",c),"down");n.$broadcast("stopSound")};e.removeAll=function(){e.tl.clear()};e.$on("resize",function(e,t){});e.shareFacebook=function(t){function i(e){e!=null}t.preventDefault();e.shareLink=n.site+e.postdata[slideNum].acf.button_link.permalink;e.shareHeadline=e.postdata[slideNum].acf.headline;e.shareDesc=e.postdata[slideNum].acf.button_text;var r={method:"feed",link:n.dir+e.postdata[slideNum].acf.button_link.permalink,picture:e.postdata[slideNum].acf.background_image.url,name:e.shareHeadline,description:e.shareDesc};FB.ui(r,i)};e.shareView=!1;e.toggleShare=function(t){t.preventDefault();e.shareView=!e.shareView}}]);murakamiApp.controller("AboutPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function c(){TweenMax.to(u,2,{css:{autoAlpha:1}});var t=s.hash();t?e.scrollTo(t):TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function h(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.slideContent;var u=$("#about");e.pageType="author";e.postdata;t({method:"GET",url:e.api,params:{json:"murakami/get_page",slug:"author"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,c)}).error(function(e,t,n,r){});var a=!0,f=0,l=0;e.nextImg=function(t,n){t&&t.preventDefault();l+=n;l>=e.postdata.post.acf.desk_items.length&&(l=0);l<=-1&&(l=e.postdata.post.acf.desk_items.length-1);e.showSlide(t,l);return!1};e.showSlide=function(t,r){t.preventDefault();e.slideContent=e.postdata.post.acf.desk_items[r];l=r;$(".slide").show();TweenMax.set($(".slide img"),{autoAlpha:0});TweenMax.to($(".slide img"),.75,{css:{autoAlpha:1},ease:Expo.easeOut});n.$broadcast("openPopup")};e.hideSlide=function(t){t.preventDefault();$(".slide").hide();$(".slide img").attr("src","");e.slideContent="";n.$broadcast("closePopup")};e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.scrollTo=function(e){o()};e.aniOut=function(){TweenMax.to(u,1,{css:{autoAlpha:0}})};e.removeAll=function(){}}]);murakamiApp.controller("SummaryPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function a(){t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book",post_slug:e.postdata.acf.book.post_name}}).success(function(t,n,r,i){e.bookData=t.post}).error(function(e,t,n,r){})}function f(){var t=new TimelineMax;t.pause();u=$(".textPage."+e.bookID);angular.forEach($(".ani",u),function(e,n){var r=$(e),i=.05*n+1,s=2;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));t.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));t.insert(TweenMax.to(r,2,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}))});t.insert(TweenMax.to($(".hero",u),2,{css:{height:200},ease:Quint.easeOut,delay:1}));t.play();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function l(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.aniInDelay=1;e.bookID=r.id;var u=$(".textPage"+e.bookID);e.pageType="text";e.postdata;t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book_summary",post_slug:r.id}}).success(function(t,n,r,i){e.postdata=t.post;a(t.post);f()}).error(function(e,t,n,r){});e.bookData;e.aniIn=function(){};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});e.insert(TweenMax.to($(".hero",u),1,{css:{height:600},ease:Quint.easeOut}));e.play()};e.removeAll=function(){}}]);murakamiApp.controller("NavController",["$scope","$routeParams","$location","$analytics","$rootScope","$http",function(e,t,n,r,i,s){e.tl=new TimelineMax;e.tl.pause();var o=$("nav"),u=$("nav, #stylelogo");s({method:"GET",url:e.api,params:{json:"murakami/get_sitevars"}}).success(function(e,t,n,r){i.siteVars=e}).error(function(e,t,n,r){});s({method:"GET",url:e.api,params:{json:"murakami/get_section",taxonomy:"resource_category",post_type:"page",post_slug:"page-resources"}}).success(function(e,t,n,r){i.resourceNav=e}).error(function(e,t,n,r){});s({method:"GET",url:e.api,params:{json:"murakami/get_section",taxonomy:"community_category",post_type:"page",post_slug:"page-community"}}).success(function(e,t,n,r){i.communityNav=e}).error(function(e,t,n,r){});s({method:"GET",url:e.api,params:{json:"get_posts",post_type:"book",orderby:"meta_value_num",order:"DESC",meta_key:"publication_date",count:"-1"}}).success(function(e,t,n,r){i.bookList=e}).error(function(e,t,n,r){});var a=$(".emailMsg");e.$on("$routeChangeStart",function(e,t){i.locationPath=n.path();if(n.path()!="/"){u.removeClass();o.addClass("book");$("body").removeClass("home");$("html").removeClass("home")}else{o.removeClass("book");$("body").addClass("home");$("html").addClass("home")}$("a",o).removeClass("active");n.path().indexOf("author")>-1&&$(".nav-author",o).addClass("active");n.path().indexOf("library")>-1&&$(".nav-library",o).addClass("active");n.path().indexOf("community")>-1&&$(".nav-community",o).addClass("active");n.path().indexOf("resource")>-1&&$(".nav-resources",o).addClass("active");i.$broadcast("closePopup");if(n.search().success=="true"){a.html("Thank you for signing up!");a.show();TweenMax.to(a,1,{css:{autoAlpha:1}});TweenMax.to(a,1,{css:{autoAlpha:0},delay:3,onComplete:function(){a.hide()}})}if(n.search().success=="false"){$(".emailMsg").html("Sorry, there was an error submitting your email, please try again");a.show();TweenMax.to(a,1,{css:{autoAlpha:1}});TweenMax.to(a,1,{css:{autoAlpha:0},delay:3,onComplete:function(){a.hide()}})}});e.$on("homeTileChange",function(e,t){TweenMax.delayedCall(t.delay,function(){u.removeClass();u.addClass(t.color)})});e.open=!1;e.$on("openPopup",function(){o.addClass("moveBack")});e.$on("closePopup",function(){o.removeClass("moveBack")});e.openMenu=function(t){if(!e.open){TweenMax.to($("ul",o),1,{css:{height:160},ease:Expo.easeOut});TweenMax.to($("nav .close"),1,{delay:.75,css:{opacity:1},ease:Expo.easeOut});e.open=!0;$(".catcher-closed").addClass("catcher-open");$(".book .menu").addClass("menu-open")}else{$(".catcher-closed").removeClass("catcher-open");$(".book .menu").removeClass("menu-open");TweenMax.to($("ul",o),1,{css:{height:0},ease:Expo.easeOut});TweenMax.to($("nav .close"),1,{css:{opacity:0},ease:Expo.easeOut});e.open=!1}};e.closeMenu=function(t){$(".catcher-closed").removeClass("catcher-open");$(".book .menu").removeClass("menu-open");TweenMax.to($("ul",o),1,{css:{height:0},ease:Expo.easeOut});TweenMax.to($("nav .close"),1,{css:{opacity:0},ease:Expo.easeOut});e.open=!1};e.navClick=function(t){$("nav a, .logo a").blur();mobileView&&e.closeMenu(t);return!1};e.aniOut=function(){};e.removeAll=function(){};var f=mobileView;e.$on("resize",function(t,n){if(f!=mobileView&&!mobileView){e.open=!1;TweenMax.set($("ul",o),{height:"auto"});f=mobileView}if(f!=mobileView&&mobileView){TweenMax.set($("ul",o),{height:0});TweenMax.to($(".close"),1,{css:{opacity:0},ease:Expo.easeOut});$(".catcher-closed").removeClass("catcher-open");e.open=!1;f=mobileView}});e.footerSubmit=function(t){s({method:"POST",url:"http://www.randomhouse.com/cgi-bin/newsletters/index.php",params:e.formData,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){t.error?e.errorMsg=t.error:e.successMsg="Your story has been submitted for approval"})}}]);murakamiApp.controller("ReadersGuidePageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function a(){t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book",post_slug:e.postdata.acf.book.post_name}}).success(function(t,n,r,i){e.bookData=t.post}).error(function(e,t,n,r){})}function f(){var t=new TimelineMax;t.pause();u=$(".textPage."+e.bookID);angular.forEach($(".ani",u),function(e,n){var r=$(e),i=.05*n+1,s=2;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));t.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));t.insert(TweenMax.to(r,2,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}))});t.insert(TweenMax.to($(".hero",u),2,{css:{height:200},ease:Quint.easeOut,delay:1}));t.play();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function l(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.aniInDelay=1;e.bookID=r.id;var u=$(".textPage"+e.bookID);e.pageType="text";e.postdata;t({method:"GET",url:e.api,params:{json:"get_post",post_type:"reading_guide",post_slug:r.id,count:"-1"}}).success(function(t,n,r,i){e.postdata=t.post;a(t.post);f()}).error(function(e,t,n,r){});e.bookData;e.aniIn=function(){};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});e.insert(TweenMax.to($(".hero",u),1,{css:{height:600},ease:Quint.easeOut}));e.play()};e.removeAll=function(){}}]);murakamiApp.controller("ReviewPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function a(){t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book",post_slug:e.postdata.acf.book.post_name}}).success(function(t,n,r,i){e.bookData=t.post}).error(function(e,t,n,r){})}function f(){var t=new TimelineMax;t.pause();u=$(".textPage."+e.bookID);angular.forEach($(".ani",u),function(e,n){var r=$(e),i=.05*n+1,s=2;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));t.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));t.insert(TweenMax.to(r,2,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}))});t.insert(TweenMax.to($(".hero",u),2,{css:{height:200},ease:Quint.easeOut,delay:1}));t.play();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function l(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.aniInDelay=1;e.bookID=r.id;var u=$(".textPage"+e.bookID);e.pageType="text";e.postdata;t({method:"GET",url:e.api,params:{json:"get_post",post_type:"review",post_slug:r.id,count:"-1"}}).success(function(t,n,r,i){e.postdata=t.post;a(t.post);f()}).error(function(e,t,n,r){});e.bookData;e.aniIn=function(){};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});e.insert(TweenMax.to($(".hero",u),1,{css:{height:600},ease:Quint.easeOut}));e.play()};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesReviewController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){e.bookTitle=e.postdata.posts[l].title;e.bookLink=e.postdata.posts[l].acf.book.post_name;e.currentBody=e.postdata.posts[l].acf.review;$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+l).addClass("active");h?e.$apply():s.path("resource_category/review/"+e.postdata.posts[l].slug,!1);h=!1}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(f,2,{css:{autoAlpha:1},ease:Quint.easeOut});if(r.loc){var t=0;angular.forEach(e.postdata.posts,function(e,n){e.slug==r.loc&&(t=n)});l=t}p()}e.aniInStyle="static";e.aniOutStyle="staticUnder";var u=s.path().split("/"),a=u[u.length-1];a="review";var f=$(".resourcesSub."+a);e.currentSlug=a;e.pageType="resources";e.postdata;var l=0,c=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:a,term_slug:a,count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});var h=!0;e.changeChapter=function(e,t){e.preventDefault();c=t;p()};e.changeBook=function(e,t){e.preventDefault();l=t;c=0;p()};e.aniIn=function(){TweenMax.set(f,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(f,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function l(){var e=new TimelineMax;e.pause();angular.forEach($(".holder",u),function(t,n){var r=$(t),i=.25*n+1,s=1;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));var o="100%";e.insert(TweenMax.to(r,0,{css:{width:0}}));e.insert(TweenMax.to(r,s,{css:{width:o},ease:Quint.easeOut,delay:i}))});angular.forEach($(".aniAlpha",u),function(t,n){var r=$(t),i=.25*n+1.5,s=3;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));e.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));e.insert(TweenMax.to(r,s,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}))});e.insert(TweenMax.to(u,2,{css:{autoAlpha:1}}));e.play();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function c(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";var u=$(".resources");e.pageType="resources";e.postdata;t({method:"GET",url:e.api,params:{json:"murakami/get_section",taxonomy:"resource_category",post_type:"page",post_slug:"resources"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,l)}).error(function(e,t,n,r){});var a=!0,f=0;e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});angular.forEach($(".holder",u),function(t,n){var r=$(t),i=.15*n,s=1,o=$(".outerCenter",r);o.css({width:o.width()});e.insert(TweenMax.to(r,s,{css:{width:0},ease:Quint.easeOut,delay:i}))});e.insert(TweenMax.to(u,1,{css:{autoAlpha:0},ease:Quint.easeOut}));e.play()};e.removeAll=function(){};e.$on("resize",function(e,t){})}]);murakamiApp.controller("ResourcesQAController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){e.bookTitle=e.postdata.posts[l].title;e.currentBody=e.postdata.posts[l].acf.qa_pair;$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+l).addClass("active");h?e.$apply():s.path("resource_category/q_and_a/"+e.postdata.posts[l].slug,!1);h=!1}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(f,2,{css:{autoAlpha:1},ease:Quint.easeOut});if(r.loc){var t=0;angular.forEach(e.postdata.posts,function(e,n){e.slug==r.loc&&(t=n)});l=t}p()}e.aniInStyle="static";e.aniOutStyle="staticUnder";var u=s.path().split("/"),a=u[u.length-1];a="q_and_a";var f=$(".resourcesSub."+a);e.currentSlug=a;e.pageType="resources";e.postdata;var l=0,c=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:a,term_slug:a,count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});var h=!0;e.changeChapter=function(e,t){e.preventDefault();c=t;p()};e.changeBook=function(e,t){e.preventDefault();l=t;c=0;p()};
e.aniIn=function(){TweenMax.set(f,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(f,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesGenericController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){e.bookTitle=e.postdata.posts[l].title;e.currentBody=e.postdata.posts[l].content;$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+l).addClass("active");h&&e.$apply();h=!1}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(f,2,{css:{autoAlpha:1},ease:Quint.easeOut});p()}e.aniInStyle="static";e.aniOutStyle="staticUnder";var u=s.path().split("/"),a=u[u.length-1],f=$(".resourcesSub.generic");e.currentSlug=a;e.pageType="resources";e.postdata;var l=0,c=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",term_slug:a}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});var h=!0;e.changeChapter=function(e,t){e.preventDefault();c=t;p()};e.changeBook=function(e,t){e.preventDefault();l=t;c=0;p()};e.aniIn=function(){TweenMax.set(f,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(f,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesMusicController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function c(){TweenMax.to(u,2,{css:{autoAlpha:1},ease:Quint.easeOut});var t=null;if(r.loc){t=0;angular.forEach(e.postdata.posts,function(e,n){e.slug==r.loc&&(t=n)})}e.tab=t;$("#t"+t).click();e.$apply()}function h(){if(e.tab!=-1){var t="t"+e.tab;e.scrollTo(t)}else TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}e.aniInStyle="static";e.aniOutStyle="static";var u=$(".resourcesSub.playlist");e.pageType="resources";e.postdata;var a=0,f=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:"playlist",term_slug:"playlist",count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,c);TweenMax.delayedCall(.5,h)}).error(function(e,t,n,r){});e.showSong=function(t,n,r){var i=e.postdata.posts[n].slug;r||(i=" ");console.log(t);TweenMax.to(t.currentTarget,1,{css:{height:"auto"},onComplete:function(){e.tab=n;console.log("done")}});s.path("resource_category/playlist/"+i,!1)};var l=!0;e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.scrollTo=function(e){TweenMax.delayedCall(.5,function(){var t=$("#"+e).offset().top-80;TweenLite.to(window,1,{scrollTo:{y:t},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})})};e.aniOut=function(){TweenMax.to(u,1,{css:{autoAlpha:0},ease:Quint.easeOut});n.$broadcast("stopSound")};e.removeAll=function(){}}]);murakamiApp.controller("BookPageController",["$scope","$http","$rootScope","$routeParams","$location","$anchorScroll",function(e,t,n,r,i,s){function a(){var t=new TimelineLite,n=0;if(prevPageType=="home"){n=1;var r=$(".hero",o);TweenMax.set(r,{autoAlpha:0});t.insert(TweenMax.to(r,2,{css:{autoAlpha:1},ease:Quint.easeOut,delay:2}))}o=$("#"+e.bookID);angular.forEach($(".ani",o),function(e,r){var i=$(e),s=.05*r+.5,o=2;i.data("delay")&&(s=i.data("delay"));i.data("time")&&(o=i.data("time"));TweenMax.set(i,{autoAlpha:0});t.insert(TweenMax.to(i,o,{css:{autoAlpha:1},ease:Quint.easeOut,delay:s+n}))});t.play();var s=i.hash();s?e.scrollTo(s):TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function f(){}function l(){t({method:"GET",url:e.api,params:{json:"murakami/get_community_story_by_book_id",book_id:e.postdata.id}}).success(function(t,n,r,i){e.communityStories=t;TweenMax.delayedCall(1,e.switchStory);e.switchStory();e.comunityLoaded="true"}).error(function(e,t,n,r){})}function c(t){var r;angular.forEach(n.communityNav.categories,function(n,r){if(n.slug==t){e.fanColor="b"+n.acf.background_color;e.textColor="t"+n.acf.text_color;e.$apply()}})}function h(){t({method:"GET",url:e.api,params:{json:"murakami/get_post_by_book_id",book_id:e.postdata.id,post_type:"review"}}).success(function(t,n,r,i){e.reviews=t}).error(function(e,t,n,r){})}function p(){t({method:"GET",url:e.api,params:{json:"murakami/get_gallery_by_book_id",book_id:e.postdata.id}}).success(function(t,n,r,i){e.gallery=t}).error(function(e,t,n,r){})}function d(){t({method:"GET",url:e.api,params:{json:"murakami/get_post_by_book_id",book_id:e.postdata.id,post_type:"playlist"}}).success(function(t,n,r,i){e.music=t}).error(function(e,t,n,r){})}function m(){e.videos=e.postdata.acf.videos;e.postdata.acf.videos&&e.nextVideo(null,0)}function g(t){var n=$(".nextBook",o),r=$(".nextBtn",n);$("._nextBook",o).css({height:n.css("height")});var s=new TimelineLite({delay:.5}),u=1,a=$(window).height(),f=600,l=40;if(mobileView){f=200;l=62}TweenMax.set(n,{position:"fixed",bottom:0,top:"auto"});s.insert(TweenMax.to(n,1,{css:{bottom:0,height:a},delay:0,ease:Expo.easeOut}));s.insert(TweenMax.to(n,u,{css:{bottom:"auto",top:l,height:f},delay:.75,ease:Quint.easeOut}));s.insert(TweenMax.to(r,1,{css:{bottom:-100,autoAlpha:0},delay:0,ease:Expo.easeOut}));s.insert(TweenMax.to($(".footer"),.5,{css:{autoAlpha:0},delay:.5,ease:Expo.easeOut}));s.play();$("h3",n).hide();TweenMax.delayedCall(1.5,function(){TweenLite.to(window,.5,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});angular.forEach($(".ani",o),function(e,t){var n=$(e);$(n).hide()});i.path("book/"+t,!0);e.$apply()})}function y(){t({method:"GET",url:e.api,params:{json:"get_posts",post_type:"book",orderby:"meta_value_num",order:"DESC",meta_key:"publication_date"}}).success(function(e,t,r,i){n.bookList=e;b()}).error(function(e,t,n,r){})}function b(){var t=0;angular.forEach(n.bookList.posts,function(n,r){n.slug==e.bookID&&(t=r+1)});t>=n.bookList.posts.length&&(t=0);e.nextBook=n.bookList.posts[t]}e.aniInStyle="static";e.aniOutStyle="static";e.bookID=r.id;e.aniInDelay=1;var o=$("#"+e.bookID);e.pageType="book";e.themeColor;e.nextBook;e.postdata;t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book",post_slug:r.id}}).success(function(t,r,i,s){e.postdata=t.post;e.themeColor=e.postdata.acf.header_color;o=$(".book."+e.bookID);TweenMax.delayedCall(.005,a);n.bookList?b():y();l();h();p();d();m()}).error(function(e,t,n,r){});var u=!0;e.scrollTo=function(e){TweenMax.delayedCall(.75,function(){var t=$("#"+e).offset().top-80;TweenLite.to(window,1,{scrollTo:{y:t},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})})};e.aniIn=function(){};e.aniOut=function(){TweenMax.to(o,2,{css:{autoAlpha:0},delay:1.5})};e.fanColor;e.comunityLoaded="false";e.communityStories;e.switchStory=function(){TweenMax.delayedCall(.15,function(){var e=$(".fans .nextSlide");c(e.data("cat"))})};e.reviews;e.gallery;e.slideNum=0;$gallDescription="";e.findGalleryActive=function(){var e=$(".gallery .flex-active-slide").data("num")};e.music;e.video;e.videos;var v=0;e.nextVideo=function(t,n){t&&t.preventDefault();v+=n;v>=e.videos.length&&(v=0);v<=-1&&(v=e.videos.length-1);e.video=e.videos[v];var r=e.video.video_embed;TweenMax.delayedCall(.25,function(){$(".videoWrapper").html(r)});return!1};e.showlinks="inactive";e.showLinks=function(t){t.preventDefault();e.showlinks="active"};e.hideLinks=function(t){t.preventDefault();e.showlinks="inactive"};e.hideSlide=function(t){t.preventDefault();$(".slide",o).hide();$(".slide img",o).attr("src","");e.slideContent=""};e.showImg=function(t,n){if(mobileView)return;var r=t.currentTarget,i=$(r).closest("li");if(!i.hasClass("flex-active-slide"))return;e.slideContent=e.gallery.posts[0].acf.gallery_images[n];curImg=n;$(".slide",o).show();TweenMax.set($(".slide img",o),{autoAlpha:0});TweenMax.to($(".slide img",o),.75,{css:{autoAlpha:1},ease:Expo.easeOut});return!1};e.nextBook2=function(e,t){e.preventDefault();g(t)};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesGalleryController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){angular.forEach($(".galleries li",f),function(e,t){var n=$(e);TweenMax.set(n,{autoAlpha:0});TweenMax.set($("h3",n),{marginTop:-90});TweenMax.to(n,1,{css:{autoAlpha:1},ease:Quint.easeOut,delay:t*.15});TweenMax.to($("h3",n),1,{css:{marginTop:0},ease:Quint.easeOut,delay:t*.15})})}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(f,2,{css:{autoAlpha:1},ease:Quint.easeOut});p()}e.aniInStyle="staticUnder";e.aniOutStyle="static";var u=s.path().split("/"),a=u[u.length-1],f=$(".resourcesSub."+a);e.currentSlug="gallery";e.pageType="resources";e.postdata;var l=0,c=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:a,term_slug:a,count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});var h=!0;e.aniIn=function(){TweenMax.set(f,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(f,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesExcerptPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function c(){e.bookTitle=e.postdata.posts[a].title;e.bookLink=e.postdata.posts[a].acf.book.post_name;e.chapters=e.postdata.posts[a].acf.chapter_sample_collection;e.currentBody=e.postdata.posts[a].acf.chapter_sample_collection[f].body;$(".chapterSubNav a").removeClass("active");$(".chapterSubNav .link"+f).addClass("active");$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+a).addClass("active");l?e.$apply():s.path("resource_category/chapter_sample/"+e.postdata.posts[a].slug,!1);l=!1}function h(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(u,2,{css:{autoAlpha:1},ease:Quint.easeOut});if(r.loc){var t=0;angular.forEach(e.postdata.posts,function(e,n){e.slug==r.loc&&(t=n)});a=t}c()}e.aniInStyle="staticUnder";e.aniOutStyle="static";var u=$(".resourcesSub.excerpts");e.currentSlug="chapter_sample";e.pageType="resources";e.postdata;var a=0,f=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:"chapter_sample",term_slug:"chapter_sample",count:"-1"}}).success(function(t,n,r,i){console.log("success on text",t);e.postdata=t;TweenMax.delayedCall(.01,h)}).error(function(e,t,n,r){});var l=!0;e.changeChapter=function(e,t){e.preventDefault();f=t;c()};e.changeBook=function(e,t){e.preventDefault();a=t;f=0;c()};e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(u,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.controller("ResourcesGallerySubController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function p(){angular.forEach($(".images li",a),function(e,t){var n=$(e);TweenMax.set(n,{autoAlpha:0,marginTop:-90});TweenMax.to(n,1,{css:{autoAlpha:1,marginTop:0},ease:Quint.easeOut,delay:t*.15})})}function d(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});p()}e.aniInStyle="static";e.aniOutStyle="static";var u=r.id,a=$(".resourcesSub.gallery");e.currentSlug="gallery";e.pageType="resources";e.postdata;var f=0,l=0;t({method:"GET",url:e.api,params:{json:"get_post",taxonomy:"resource_category",post_type:"gallery",post_slug:u,count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,d)}).error(function(e,t,n,r){});e.cat;t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:"gallery",term_slug:"gallery"}}).success(function(t,n,r,i){e.cat=t}).error(function(e,t,n,r){});var c=!0,h=0;e.showImg=function(t,n){if(mobileView)return;e.slideContent=e.postdata.post.acf.gallery_images[n];h=n;$(".slide",a).show();TweenMax.set($(".slide img",a),{autoAlpha:0});TweenMax.to($(".slide img",a),.75,{css:{autoAlpha:1},ease:Expo.easeOut});return!1};e.nextImg=function(t,n){t&&t.preventDefault();h+=n;h>=e.postdata.post.acf.gallery_images.length&&(h=0);h<=-1&&(h=e.postdata.post.acf.gallery_images.length-1);e.showImg(t,h);return!1};e.hideSlide=function(t){t.preventDefault();$(".slide",a).hide();$(".slide img",a).attr("src","");e.slideContent=""};e.aniIn=function(){var e=new TimelineLite,t=2,n=0;angular.forEach($("div",a),function(r,i){var s=$(r);TweenMax.set(s,{autoAlpha:0});e.insert(TweenMax.to(s,t,{css:{autoAlpha:1},ease:Quint.easeOut,delay:n}))});e.play()};e.aniOut=function(){var e=new TimelineLite,t=2,n=0;angular.forEach($("div",a),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:n}))});e.play()};e.removeAll=function(){}}]);murakamiApp.controller("MusicPlayerController",["$scope","$http","$rootScope","$routeParams","$window","$location",function(e,t,n,r,i,s){function f(e){if($(".songs tr.active .playback").length==0)return;var t=e.currentTime/e.duration*100+"%";TweenMax.to($(".songs tr.active .playback"),1,{css:{width:t}})}function l(e){TweenMax.to($(".songs tr .playback"),1,{css:{width:0}});$(".songs tr").removeClass("active");$(e).addClass("active")}var o=$("#jquery_jplayer"),u="",a=$(".musicControls i");o.jPlayer({ready:function(){},timeupdate:function(e){var t=e.jPlayer.status;f(t)},play:function(e){},pause:function(e){a.removeClass("fa-pause")},ended:function(e){a.removeClass("fa-pause")},swfPath:"js",supplied:"mp3",wmode:"window"});e.getTimes=function(e){return new Array(e)};e.playSong=function(e){e.preventDefault();var t=$(e.currentTarget),n=$(t).closest("tr");a=$(".musicControls i");l(n);var r=$(t).attr("href");if(r==u){u="";o.jPlayer("pause");a.removeClass("fa-pause");return!1}u=r;o.jPlayer("setMedia",{mp3:$(t).attr("href")});o.jPlayer("play");a.removeClass("fa-pause");$(".fa",t).addClass("fa-pause")};e.$on("stopSound",function(){o.jPlayer("stop")});e.removeAll=function(){}}]);murakamiApp.controller("CommunityFormController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){e.formData={post_id:"1",signup:!0};e.submitStory=function(n){t({method:"POST",url:e.api+"murakami/submit_comment",params:e.formData,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){t.error?e.errorMsg=t.error:e.successMsg="Your story has been submitted for approval"})}}]);murakamiApp.controller("CommunityPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function l(){var e=new TimelineMax;e.pause();angular.forEach($(".holder",u),function(t,n){var r=$(t),i=.25*n+1,s=1;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));var o="100%";e.insert(TweenMax.to(r,0,{css:{width:0}}));e.insert(TweenMax.to(r,s,{css:{width:o},ease:Quint.easeOut,delay:i}))});angular.forEach($(".aniAlpha",u),function(t,n){var r=$(t),i=.25*n+1.5,s=3;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));e.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));e.insert(TweenMax.to(r,s,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}));e.insert(TweenMax.to(u,2,{css:{autoAlpha:1}}))});e.play();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function c(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.fanArt;var u=$("#community");e.pageType="community";e.postdata;t({method:"GET",url:e.api,params:{json:"murakami/get_section",taxonomy:"community_category",post_type:"page",post_slug:"community"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,l)}).error(function(e,t,n,r){});t({method:"GET",url:e.api,params:{json:"murakami/get_category",taxonomy:"resource_category",post_type:"gallery",term_slug:"gallery"}}).success(function(t,n,r,i){var s=[],o=0;angular.forEach(t.posts,function(e,t){var n=!1;angular.forEach(e.taxonomy_gallery_type,function(t,r){if(t.slug=="fanart"||t.slug=="contest"&&!n){s[o]=e;o++;n=!0}})});e.fanArt=s}).error(function(e,t,n,r){});var a=!0,f=0;e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});angular.forEach($(".holder",u),function(t,n){var r=$(t),i=.15*n,s=1,o=$(".outerCenter",r);o.css({width:o.width()});e.insert(TweenMax.to(r,s,{css:{width:0},ease:Quint.easeOut,delay:i}));e.insert(TweenMax.to(u,1.5,{css:{autoAlpha:0},ease:Quint.easeOut}))});e.play()};e.removeAll=function(){};e.$on("resize",function(e,t){})}]);murakamiApp.controller("CommunityStoryController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function c(){angular.forEach(n.communityNav.categories,function(t,n){t.slug==e.storyID&&(f=n)})}function h(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(u,2,{css:{autoAlpha:1}})}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.storyID=r.id;var u=$(".communityStory");e.pageType="community";e.fanColor;e.postdata;var a=!0,f=0;t({method:"GET",url:e.api,params:{json:"murakami/get_category",term_slug:e.storyID,post_type:"community_story",taxonomy:"community_category",count:"-1"}}).success(function(t,n,r,i){e.postdata=t;e.fanColor=e.postdata.categories[0].acf.background_color;TweenMax.delayedCall(.01,h);c()}).error(function(e,t,n,r){});e.titleData;t({method:"GET",url:e.api,params:{json:"murakami/get_page",slug:"community"}}).success(function(t,n,r,i){e.titleData=t}).error(function(e,t,n,r){});var l=5;e.totalCount=l;e.nextCommunity=function(r,i){r.preventDefault();f+=i;f>=n.communityNav.categories.length&&(f=0);f<0&&(f=n.communityNav.categories.length-1);e.storyID=n.communityNav.categories[f].slug;t({method:"GET",url:e.api,params:{json:"murakami/get_category",term_slug:e.storyID,post_type:"community_story",taxonomy:"community_category",count:"-1"}}).success(function(t,n,r,i){e.totalCount=l;e.postdata=t;u=$("#"+e.storyID);s.path("community_category/"+e.storyID,!1)}).error(function(e,t,n,r){})};e.showMore=function(t,n){t.preventDefault();e.totalCount=e.totalCount+n;return!1};e.aniIn=function(){TweenMax.set(u,{autoAlpha:0})};e.aniOut=function(){TweenMax.to(u,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){};e.$on("resize",function(e,t){})}]);murakamiApp.controller("LibraryPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function c(){TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll});TweenMax.to(u,2,{css:{autoAlpha:1},ease:Quint.easeOut});angular.forEach($("li, .libraryBooks",u),function(e,t){var n=$(e);TweenMax.set(n,{autoAlpha:0});TweenMax.set($(".libraryBooks",u),{autoAlpha:1});TweenMax.to(n,3,{css:{autoAlpha:1},ease:Quint.easeOut,delay:t*.15})})}e.aniInStyle="static";e.aniOutStyle="static";var u=$(".library");e.pageType="library";e.postdata;var a=0,f=0;t({method:"GET",url:e.api,params:{json:"murakami/get_page",slug:"library",count:"-1"}}).success(function(t,n,r,i){e.postdata=t;TweenMax.delayedCall(.01,c)}).error(function(e,t,n,r){});var l=!0;e.aniIn=function(){TweenMax.set(u,{autoAlpha:0});TweenMax.set($(".libraryBooks",u),{autoAlpha:0})};e.aniOut=function(){TweenMax.to(u,1,{css:{autoAlpha:0},ease:Quint.easeOut})};e.removeAll=function(){}}]);murakamiApp.directive("scroll",["$window",function(e){return function(t,n,r){function a(e){var n=e.originalEvent.wheelDelta;n>0?o--:o++;if(o>i){t.$emit("scrollNext");o=0}if(o<s){t.$emit("scrollPrev");o=0}}var i=10,s=-10,o=0,u=!1;$(n).swipe({swipeUp:function(e,n,r,i,s){t.$emit("scrollNext")},swipeDown:function(e,n,r,i,s){t.$emit("scrollPrev")}});angular.element(e).bind("mousewheel",function(e){a(e)});angular.element(e).bind("DOMMouseScroll",function(e){a(e)})}}]);murakamiApp.directive("scrollTop",["$window",function(e){return function(e,t,n){$(window).scroll(function(){if(!$("#top").offset())return;var e=$(".scroll-top-wrapper"),t=$("#top").offset().top-$(document).scrollTop();t<200&&!e.is(".show")&&$(e).addClass("show");t>200&&e.is(".show")&&$(e).removeClass("show")});$(".scroll-top").on("click",function(){var e=$($(this).attr("href"));TweenLite.to(window,1,{scrollTo:{y:e.offset().top-50}});return!1})}}]);murakamiApp.directive("parallax",["$window",function(e){return function(e,t,n){function i(){var e=-$(t).scrollTop(),n=0,i=5,s=$(t),o=s.offset(),u=o.top;if($(window).scrollTop()+$(window).height()>u&&u+s.height()*2>$(window).scrollTop()){var a=$(window).scrollTop()/i*r;a=Math.round(a);TweenMax.to($(t),.5,{css:{backgroundPosition:"center "+a+"px"},ease:Expo.easeOut})}}var r=1;n.slow&&(r=-1);n.$observe("ng-style",function(){if(!t)return;$(window).scroll(function(){if(mobileView||ipadView){TweenMax.to($(t),.5,{css:{backgroundPosition:"center 0px"},ease:Expo.easeOut});n.slow&&TweenMax.to($(t),.5,{css:{backgroundPosition:"center 50%"},ease:Expo.easeOut});return}i()})})}}]);murakamiApp.directive("togglesong",[function(){return function(e,t,n){t.bind("click",function(){var n=t[0];e.clicked=!e.clicked;var r=$(".songs",n).height();e.clicked||(r=0);TweenMax.to($(".songwrapper",n),.5,{css:{height:r},ease:Quad.easeInOut})})}}]);murakamiApp.directive("galleryRollover",[function(){return function(e,t,n){var r=$(".bkg",t);r.bind("mouseenter",function(e){if(mobileView||ipadView)return;TweenMax.to(r,3,{css:{scaleX:1.2,scaleY:1.2},ease:Expo.easeOut});return!1});r.bind("mouseleave",function(e){if(mobileView||ipadView)return;TweenMax.to(r,1.2,{css:{scaleX:1,scaleY:1},ease:Expo.easeOut});return!1})}}]);murakamiApp.directive("backBtn",["$window",function(e){return function(t,n,r){var i=$("a",n[0]);i.bind("click",function(t){e.history.back();return!1})}}]);murakamiApp.directive("addUppercase",[function(){return function(e,t,n){TweenMax.delayedCall(.01,function(){$(t).addClass("uppercase")})}}]);murakamiApp.directive("myDirective",["$http","$location",function(e,t){}]);murakamiApp.directive("footer",["$http","$location",function(e,t){return function(e,t,n){var r=$(t[0]);TweenMax.set(r,{autoAlpha:0});r.hide();TweenMax.delayedCall(1.5,function(){r.show();TweenMax.set(r,{autoAlpha:0});TweenMax.to(r,1,{autoAlpha:1})})}}]);murakamiApp.directive("slideshowimg",[function(){return{restrict:"E",replace:!0,link:function(e,t,n){n.$observe($("li",t),function(e){var n=0,r,i=[];$("._slider",t).flexslider({animation:"slide",controlNav:!1,directionNav:!1,slideshow:!1,nextText:"",prevText:"",before:function(e){TweenMax.to(r,.25,{css:{autoAlpha:0}});n=e.animatingTo;r=$(".slideDesc",t)[n];TweenMax.to(r,.25,{css:{autoAlpha:1}});TweenMax.to($(".textlist",t),.25,{css:{height:i[n],autoAlpha:1}})},after:function(e){},start:function(e){angular.forEach($(".slideDesc",t),function(e,t){i[t]=$(".content",e).height();TweenMax.to($(e),0,{css:{autoAlpha:0}})});r=$(".slideDesc",t)[n];TweenMax.to(r,.25,{css:{autoAlpha:1}});TweenMax.to($(".textlist",t),.25,{css:{height:i[n],autoAlpha:1}})}});$("._next",t).bind("click",function(e){e.preventDefault();var n=$(this).attr("href");$("._slider",t).flexslider(n)});$("._prev",t).bind("click",function(e){e.preventDefault();var n=$(this).attr("href");$("._slider",t).flexslider(n)})})}}}]);murakamiApp.directive("slideshowtext",[function(){return{restrict:"E",replace:!0,link:function(e,t,n){n.$observe($("li",t),function(e){var n=0,r,i=[];$("._slider",t).flexslider({controlNav:!1,directionNav:!1,slideshow:!1,smoothHeight:!0,nextText:"",prevText:"",before:function(e){$(e.slides[e.currentSlide]).removeClass("nextSlide");var t=e.animatingTo,n=$(e.slides[t]);$(n).addClass("nextSlide")},after:function(e){e.resize();$(e.slides[e.currentSlide]).removeClass("nextSlide")},start:function(e){}});$("._next",t).bind("click",function(e){e.preventDefault();var n=$(this).attr("href");$("._slider",t).flexslider(n)});$("._prev",t).bind("click",function(e){e.preventDefault();var n=$(this).attr("href");$("._slider",t).flexslider(n)})})}}}]);murakamiApp.directive("slideshowquote",["$window",function(e){return{restrict:"E",replace:!0,link:function(e,t,n){n.$observe($("li",t),function(e){function s(e){e.preventDefault();var n=$(this).attr("href");$("._slider",t).flexslider(n)}var n=0,r,i=[];$("._slider",t).flexslider({controlNav:!1,directionNav:!1,slideshow:!1,smoothHeight:!1,nextText:"",prevText:"",before:function(e){$(e.slides[e.currentSlide]).removeClass("nextSlide");var t=e.animatingTo,n=$(e.slides[t]);$(n).addClass("nextSlide")},after:function(e){e.resize();$(e.slides[e.currentSlide]).removeClass("nextSlide")},start:function(e){}});$("._next",t).bind("click",s);$("._prev",t).bind("click",s);$("._refresh",t).bind("click",s)})}}}]);murakamiApp.directive("stagger",[function(){return{restrict:"E",replace:!0,link:function(e,t,n){function r(e){var t=$(e),n=1;t.data("delay")&&(n=t.data("delay"));var r=new TimelineLite({delay:n}),i=new SplitText(t,{type:"words,chars"}),s=i.chars,o=s.length;r.pause();for(var u=0;u<o;u++)r.from(s[u],2.5,{opacity:0,ease:Quad.easeOut},Math.random()*.75);var a=e.closest("h1");TweenMax.to(a,1,{css:{className:"+=underline"},ease:Expo.easeInOut,delay:1.75});r.play()}n.$observe("staggertxt",function(e){t.html(e);r(t)})}}}]);murakamiApp.directive("librarybook",[function(){return function(e,t,n){function s(e){tl=new TimelineLite({delay:.15});tl.pause();var t=$(e),n=0;t.hide();TweenMax.delayedCall(n,function(){t.show()});angular.forEach($(".b",t),function(e,t){var r=$(e);if(r.hasClass("bt")||r.hasClass("bb")){TweenMax.set(r,{width:"0%"});tl.insert(TweenMax.to(r,1.5,{css:{width:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({width:"none"})}}),n)}else{TweenMax.set(r,{height:"0%"});r.hasClass("gap")?tl.insert(TweenMax.to(r,1.5,{css:{height:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({height:"none"})}}),n+.5):tl.insert(TweenMax.to(r,1.5,{css:{height:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({height:"none"})}}),n)}});var r=-100;TweenMax.set($(".txt",t),{top:r});tl.insert(TweenMax.to($(".txt",t),1.5,{css:{top:0},ease:Expo.easeOut,onComplete:function(){$(e).removeClass("_animating")}}),n);tl.play()}var r=$(t),i=$(".hover",r);r.bind("mouseenter",function(e){if(mobileView||ipadView)return;i.show();s($(".btn",t));TweenMax.set(i,{autoAlpha:0});TweenMax.to(i,1,{css:{autoAlpha:1},ease:Expo.easeOut});return!1});r.bind("mouseleave",function(e){TweenMax.to(i,1.5,{css:{autoAlpha:0},ease:Expo.easeOut,onComplete:function(){i.hide()}});return!1})}}]);murakamiApp.directive("btnlines",[function(){return{restrict:"E",replace:!0,link:function(e,t,n){function r(e){tl=new TimelineLite({delay:1});tl.pause();var t=$(e),n=0;t.data("delay")&&(n=t.data("delay"));t.hide();TweenMax.delayedCall(n,function(){t.show()});angular.forEach($(".b",t),function(e,t){var r=$(e);if(r.hasClass("bt")||r.hasClass("bb")){TweenMax.set(r,{width:"0%"});tl.insert(TweenMax.to(r,1.5,{css:{width:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({width:"none"})}}),n)}else{TweenMax.set(r,{height:"0%"});r.hasClass("gap")?tl.insert(TweenMax.to(r,1.5,{css:{height:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({height:"none"})}}),n+.5):tl.insert(TweenMax.to(r,1.5,{css:{height:"100%"},ease:Expo.easeOut,onComplete:function(){r.css({height:"none"})}}),n)}});var r=-200;TweenMax.set($(".txt",t),{top:r});tl.insert(TweenMax.to($(".txt",t),1.5,{css:{top:0},ease:Expo.easeOut,onComplete:function(){$(e).removeClass("_animating")}}),n);tl.play()}n.$observe("delay",function(e){r(t);$(t).addClass("_animating")})}}}]);angular.module("ng.picturefill",[]).directive("pictureFill",[function(){return{controller:"PictureFillCtrl",link:function(e,t,n){t.attr("data-picture","")}}}]).directive("pfSrc",function(){return{link:function(e,t,n){n.$observe("pf-src",function(){if(!n.pfSrc)return;t.attr("data-src",n.pfSrc)})}}}).controller("PictureFillCtrl",["$timeout",function(e){e(picturefill)}]).filter("trimExt",[function(){return function(e){if(e)return e.slice(0,e.lastIndexOf("."))||e}}]);var mobileView=!1,ipadView=navigator.userAgent.match(/iPad/i)!=null;murakamiApp.directive("resizable",["$window",function(e){return function(t){t.initializeWindowSize=function(){_h=e.innerHeight;_w=e.innerWidth;if(_w<768&&!mobileView){mobileView=!0;$("body").addClass("mobile");$("body").removeClass("desktop")}else if(_w>768&&mobileView){mobileView=!1;$("body").removeClass("mobile");$("body").addClass("desktop")}var n={width:_w,height:_h,mobile:mobileView};t.$broadcast("resize",n)};angular.element(e).bind("resize",function(){t.initializeWindowSize();t.$apply();t.initializeWindowSize()});t.initializeWindowSize()}}]);var keys=[37,38,39,40];murakamiApp.controller("ContentNavController",["$scope",function(e){function i(){e.chapters=e.postdata.posts[t].acf.chapter_sample_collection;e.currentBody=e.postdata.posts[t].acf.chapter_sample_collection[n].body;$(".chapterSubNav a").removeClass("active");$(".chapterSubNav .link"+n).addClass("active");$(".bookSubNav a").removeClass("active");$(".bookSubNav .link"+t).addClass("active")}e.postdata;var t=0,n=0,r=!0;e.aniIn=function(){};e.changeChapter=function(e,t){e.preventDefault();n=t;i()};e.changeBook=function(e,r){e.preventDefault();t=r;n=0;i()}}]);murakamiApp.controller("GallerySliderController",["$scope","$routeParams","$location","$analytics","$rootScope","$http",function(e,t,n,r,i,s){$("#_commentSlider").flexslider({animation:"horizontal",slideshow:!1,controlNav:!1})}]);murakamiApp.controller("ExcerptPageController",["$scope","$http","$rootScope","$routeParams","$window","$location","$anchorScroll",function(e,t,n,r,i,s,o){function a(){t({method:"GET",url:e.api,params:{json:"get_post",post_type:"book",post_slug:e.postdata.acf.book.post_name}}).success(function(t,n,r,i){e.bookData=t.post}).error(function(e,t,n,r){})}function c(){e.currentBody=e.postdata.acf.chapter_sample_collection[l].body;e.chapters=e.postdata.acf.chapter_sample_collection;$(".subNav a").removeClass("active");$(".subNav .link"+l).addClass("active")}function h(){var t=new TimelineMax;t.pause();u=$(".textPage."+e.bookID);angular.forEach($(".ani",u),function(e,n){var r=$(e),i=.05*n+.5,s=2;r.data("delay")&&(i=r.data("delay"));r.data("time")&&(s=r.data("time"));t.insert(TweenMax.to(r,0,{css:{autoAlpha:0}}));t.insert(TweenMax.to(r,2,{css:{autoAlpha:1},ease:Quint.easeOut,delay:i}))});t.insert(TweenMax.to($(".hero",u),2,{css:{height:200},ease:Quint.easeOut,delay:1}));t.play();c();TweenLite.to(window,.75,{scrollTo:{y:0},ease:Quint.easeOutExpo,onStart:disable_scroll,onComplete:enable_scroll})}function p(){}e.aniInStyle="static";e.aniOutStyle="staticUnder";e.bookID=r.id;var u=$(".textPage"+e.bookID);e.pageType="text";e.postdata;t({method:"GET",url:e.api,params:{json:"get_post",post_type:"chapter_sample",post_slug:r.id}}).success(function(t,n,r,i){e.postdata=t.post;a();h()}).error(function(e,t,n,r){});e.bookData;var f=!0,l=0;e.changeChapter=function(e,t){e.preventDefault();l=t;c()};e.aniIn=function(){};e.aniOut=function(){var e=new TimelineLite,t=1,n=.01;angular.forEach($(".ani",u),function(r,i){var s=$(r);e.insert(TweenMax.to(s,t,{css:{autoAlpha:0},ease:Quint.easeOut,delay:i*n}))});e.insert(TweenMax.to($(".hero",u),1,{css:{height:600},ease:Quint.easeOut}));e.play()};e.removeAll=function(){}}]);