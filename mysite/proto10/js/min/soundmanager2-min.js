/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20140901
 */
!function(e,t){"use strict";function n(n,o){function i(e){return r.preferFlash&&Ut&&!r.ignoreFlash&&r.flash[e]!==t&&r.flash[e]}function a(e){return function(t){var n=this._s,o;return n&&n._a?o=e.call(this,t):(r._wD(n&&n.id?n.id+": Ignoring "+t.type:h+"Ignoring "+t.type),o=null),o}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=o||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var s,r=this,l=null,u=null,d="soundManager",f=d+": ",h="HTML5::",c,p=navigator.userAgent,m=e.location.href.toString(),_=document,g,y,w,v,O=[],b=!0,D,M=!1,L=!1,T=!1,P=!1,S=!1,F,I=0,H,A,E,C,k,x,R,N,U,B,j,W,q,V,Q,K,J,X,z,G,Z,Y,et,tt=["log","info","warn","error"],nt=8,ot,it,at,st=null,rt=null,lt,ut,dt,ft,ht,ct,pt,mt,_t,gt=!1,yt=!1,wt,vt,Ot,bt=0,Dt=null,Mt,Lt=[],Tt,Pt=null,St,Ft,It,Ht,At,Et,Ct,kt,xt=Array.prototype.slice,Rt=!1,Nt,Ut,Bt,jt,Wt,qt,Vt,Qt,Kt=0,$t=p.match(/(ipad|iphone|ipod)/i),Jt=p.match(/android/i),Xt=p.match(/msie/i),zt=p.match(/webkit/i),Gt=p.match(/safari/i)&&!p.match(/chrome/i),Zt=p.match(/opera/i),Yt=p.match(/(mobile|pre\/|xoom)/i)||$t||Jt,en=!m.match(/usehtml5audio/i)&&!m.match(/sm2\-ignorebadua/i)&&Gt&&!p.match(/silk/i)&&p.match(/OS X 10_6_([3-7])/i),tn=e.console!==t&&console.log!==t,nn=_.hasFocus!==t?_.hasFocus():null,on=Gt&&(_.hasFocus===t||!_.hasFocus()),an=!on,sn=/(mp3|mp4|mpa|m4a|m4b)/i,rn=1e3,ln="about:blank",un="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",dn=_.location?_.location.protocol.match(/http/i):null,fn=dn?"":"http://",hn=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,cn=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],pn=new RegExp("\\.("+cn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!dn,ft={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==t&&(Zt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return!1}}(),this.setup=function(e){var n=!r.url;return e!==t&&T&&Pt&&r.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&mt(lt("setupLate")),E(e),e&&(n&&X&&e.url!==t&&r.beginDelayedInit(),X||e.url===t||"complete"!==_.readyState||setTimeout(K,1)),r},this.ok=function(){return Pt?T&&!P:r.useHTML5Audio&&r.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return c(t)||_[t]||e[t]},this.createSound=function(e,n){function o(){return l=ct(l),r.sounds[l.id]=new s(l),r.soundIDs.push(l.id),r.sounds[l.id]}var i,a,l,f=null;if(i=d+".createSound(): ",a=i+lt(T?"notOK":"notReady"),!T||!r.ok())return mt(a),!1;if(n!==t&&(e={id:e,url:n}),l=A(e),l.url=Mt(l.url),void 0===l.id&&(l.id=r.setupOptions.idPrefix+Kt++),l.id.toString().charAt(0).match(/^[0-9]$/)&&r._wD(i+lt("badID",l.id),2),r._wD(i+l.id+(l.url?" ("+l.url+")":""),1),_t(l.id,!0))return r._wD(i+l.id+" exists",1),r.sounds[l.id];if(Ft(l))f=o(),r._wD(l.id+": Using HTML5"),f._setup_html5(l);else{if(r.html5Only)return r._wD(l.id+": No HTML5 support for this sound, and no Flash. Exiting."),o();if(r.html5.usingFlash&&l.url&&l.url.match(/data\:/i))return r._wD(l.id+": data: URIs not supported via Flash. Exiting."),o();v>8&&(null===l.isMovieStar&&(l.isMovieStar=!!(l.serverURL||(l.type?l.type.match(hn):!1)||l.url&&l.url.match(pn))),l.isMovieStar&&(r._wD(i+"using MovieStar handling"),l.loops>1&&F("noNSLoop"))),l=pt(l,i),f=o(),8===v?u._createSound(l.id,l.loops||1,l.usePolicyFile):(u._createSound(l.id,l.url,l.usePeakData,l.useWaveformData,l.useEQData,l.isMovieStar,l.isMovieStar?l.bufferTime:!1,l.loops||1,l.serverURL,l.duration||null,l.autoPlay,!0,l.autoLoad,l.usePolicyFile),l.serverURL||(f.connected=!0,l.onconnect&&l.onconnect.apply(f))),l.serverURL||!l.autoLoad&&!l.autoPlay||f.load(l)}return!l.serverURL&&l.autoPlay&&f.play(),f},this.destroySound=function(e,t){if(!_t(e))return!1;var n=r.sounds[e],o;for(n._iO={},n.stop(),n.unload(),o=0;o<r.soundIDs.length;o++)if(r.soundIDs[o]===e){r.soundIDs.splice(o,1);break}return t||n.destruct(!0),n=null,delete r.sounds[e],!0},this.load=function(e,t){return _t(e)?r.sounds[e].load(t):!1},this.unload=function(e){return _t(e)?r.sounds[e].unload():!1},this.onPosition=function(e,t,n,o){return _t(e)?r.sounds[e].onposition(t,n,o):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return _t(e)?r.sounds[e].clearOnPosition(t,n):!1},this.play=function(e,t){var n=null,o=t&&!(t instanceof Object);if(!T||!r.ok())return mt(d+".play(): "+lt(T?"notOK":"notReady")),!1;if(_t(e,o))o&&(t={url:t});else{if(!o)return!1;o&&(t={url:t}),t&&t.url&&(r._wD(d+'.play(): Attempting to create "'+e+'"',1),t.id=e,n=r.createSound(t).play())}return null===n&&(n=r.sounds[e].play(t)),n},this.start=this.play,this.setPosition=function(e,t){return _t(e)?r.sounds[e].setPosition(t):!1},this.stop=function(e){return _t(e)?(r._wD(d+".stop("+e+")",1),r.sounds[e].stop()):!1},this.stopAll=function(){var e;r._wD(d+".stopAll()",1);for(e in r.sounds)r.sounds.hasOwnProperty(e)&&r.sounds[e].stop()},this.pause=function(e){return _t(e)?r.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=r.soundIDs.length-1;e>=0;e--)r.sounds[r.soundIDs[e]].pause()},this.resume=function(e){return _t(e)?r.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=r.soundIDs.length-1;e>=0;e--)r.sounds[r.soundIDs[e]].resume()},this.togglePause=function(e){return _t(e)?r.sounds[e].togglePause():!1},this.setPan=function(e,t){return _t(e)?r.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return _t(e)?r.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return _t(e)?(r._wD(d+'.mute(): Muting "'+e+'"'),r.sounds[e].mute()):!1;for(r._wD(d+".mute(): Muting all sounds"),t=r.soundIDs.length-1;t>=0;t--)r.sounds[r.soundIDs[t]].mute();return r.muted=!0,!0},this.muteAll=function(){r.mute()},this.unmute=function(e){var t;if(e instanceof String&&(e=null),e)return _t(e)?(r._wD(d+'.unmute(): Unmuting "'+e+'"'),r.sounds[e].unmute()):!1;for(r._wD(d+".unmute(): Unmuting all sounds"),t=r.soundIDs.length-1;t>=0;t--)r.sounds[r.soundIDs[t]].unmute();return r.muted=!1,!0},this.unmuteAll=function(){r.unmute()},this.toggleMute=function(e){return _t(e)?r.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return u&&8!==v&&(e=parseInt(u._getMemoryUse(),10)),e},this.disable=function(n){var o;if(n===t&&(n=!1),P)return!1;for(P=!0,F("shutdown",1),o=r.soundIDs.length-1;o>=0;o--)ot(r.sounds[r.soundIDs[o]]);return H(n),kt.remove(e,"load",R),!0},this.canPlayMIME=function(e){var t;return r.hasHTML5&&(t=It({type:e})),!t&&Pt&&(t=e&&r.ok()?!!((v>8?e.match(hn):null)||e.match(r.mimePattern)):null),t},this.canPlayURL=function(e){var t;return r.hasHTML5&&(t=It({url:e})),!t&&Pt&&(t=e&&r.ok()?!!e.match(r.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&r.canPlayMIME(e.type)?!0:r.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var n=r.sounds[e];return n||t||r._wD(d+'.getSoundById(): Sound "'+e+'" not found.',2),n},this.onready=function(t,n){var o="onready",i=!1;if("function"!=typeof t)throw lt("needFunction",o);return T&&r._wD(lt("queue",o)),n||(n=e),k(o,t,n),x(),i=!0,i},this.ontimeout=function(t,n){var o="ontimeout",i=!1;if("function"!=typeof t)throw lt("needFunction",o);return T&&r._wD(lt("queue",o)),n||(n=e),k(o,t,n),x({type:o}),i=!0,i},this._writeDebug=function(e,n){var o="soundmanager-debug",i,a;return r.debugMode?tn&&r.useConsole&&(n&&"object"==typeof n?console.log(e,n):tt[n]!==t?console[tt[n]](e):console.log(e),r.consoleOnly)?!0:(i=c(o))?(a=_.createElement("div"),++I%2===0&&(a.className="sm2-alt"),n=n===t?0:parseInt(n,10),a.appendChild(_.createTextNode(e)),n&&(n>=2&&(a.style.fontWeight="bold"),3===n&&(a.style.color="#ff3333")),i.insertBefore(a,i.firstChild),i=null,!0):!1:!1},-1!==m.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(F("currentObj",1),e=0,t=r.soundIDs.length;t>e;e++)r.sounds[r.soundIDs[e]]._debug()},this.reboot=function(t,n){r.soundIDs.length&&r._wD("Destroying "+r.soundIDs.length+" SMSound object"+(1!==r.soundIDs.length?"s":"")+"...");var o,i,a;for(o=r.soundIDs.length-1;o>=0;o--)r.sounds[r.soundIDs[o]].destruct();if(u)try{Xt&&(rt=u.innerHTML),st=u.parentNode.removeChild(u)}catch(s){F("badRemove",2)}if(rt=st=Pt=u=null,r.enabled=X=T=gt=yt=M=L=P=Rt=r.swfLoaded=!1,r.soundIDs=[],r.sounds={},Kt=0,t)O=[];else for(o in O)if(O.hasOwnProperty(o))for(i=0,a=O[o].length;a>i;i++)O[o][i].fired=!1;return n||r._wD(d+": Rebooting..."),r.html5={usingFlash:null},r.flash={},r.html5Only=!1,r.ignoreFlash=!1,e.setTimeout(function(){Q(),n||r.beginDelayedInit()},20),r},this.reset=function(){return F("reset"),r.reboot(!0,!0)},this.getMoviePercent=function(){return u&&"PercentLoaded"in u?u.PercentLoaded():null},this.beginDelayedInit=function(){S=!0,K(),setTimeout(function(){return yt?!1:(G(),V(),yt=!0,!0)},20),N()},this.destruct=function(){r._wD(d+".destruct()"),r.disable(!0)},s=function(e){var n=this,o,i,a,s,d,f,h=!1,c=[],p=0,m,_,g=null,y,w;y={duration:null,time:null},this.id=e.id,this.sID=this.id,this.url=e.url,this.options=A(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,w=this.url?!1:!0,this.id3={},this._debug=function(){r._wD(n.id+": Merged options:",n.options)},this.load=function(e){var o=null,i;if(e!==t?n._iO=A(e,n.options):(e=n.options,n._iO=e,g&&g!==n.url&&(F("manURL"),n._iO.url=n.url,n.url=null)),n._iO.url||(n._iO.url=n.url),n._iO.url=Mt(n._iO.url),n.instanceOptions=n._iO,i=n._iO,r._wD(n.id+": load ("+i.url+")"),!i.url&&!n.url)return r._wD(n.id+": load(): url is unassigned. Exiting.",2),n;if(n.isHTML5||8!==v||n.url||i.autoPlay||r._wD(n.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),i.url===n.url&&0!==n.readyState&&2!==n.readyState)return F("onURL",1),3===n.readyState&&i.onload&&Qt(n,function(){i.onload.apply(n,[!!n.duration])}),n;if(n.loaded=!1,n.readyState=1,n.playState=0,n.id3={},Ft(i))o=n._setup_html5(i),o._called_load?r._wD(n.id+": Ignoring request to load again"):(n._html5_canplay=!1,n.url!==i.url&&(r._wD(F("manURL")+": "+i.url),n._a.src=i.url,n.setPosition(0)),n._a.autobuffer="auto",n._a.preload="auto",n._a._called_load=!0);else{if(r.html5Only)return r._wD(n.id+": No flash support. Exiting."),n;if(n._iO.url&&n._iO.url.match(/data\:/i))return r._wD(n.id+": data: URIs not supported via Flash. Exiting."),n;try{n.isHTML5=!1,n._iO=pt(ct(i)),n._iO.autoPlay&&(n._iO.position||n._iO.from)&&(r._wD(n.id+": Disabling autoPlay because of non-zero offset case"),n._iO.autoPlay=!1),i=n._iO,8===v?u._load(n.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):u._load(n.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(a){F("smError",2),D("onload",!1),Z({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return n.url=i.url,n},this.unload=function(){return 0!==n.readyState&&(r._wD(n.id+": unload()"),n.isHTML5?(s(),n._a&&(n._a.pause(),g=At(n._a))):8===v?u._unload(n.id,ln):u._unload(n.id),o()),n},this.destruct=function(e){r._wD(n.id+": Destruct"),n.isHTML5?(s(),n._a&&(n._a.pause(),At(n._a),Rt||a(),n._a._s=null,n._a=null)):(n._iO.onfailure=null,u._destroySound(n.id)),e||r.destroySound(n.id,!0)},this.play=function(e,o){var i,a,s,l,c,p,m,g=!0,y=null;if(i=n.id+": play(): ",o=o===t?!0:o,e||(e={}),n.url&&(n._iO.url=n.url),n._iO=A(n._iO,n.options),n._iO=A(e,n._iO),n._iO.url=Mt(n._iO.url),n.instanceOptions=n._iO,!n.isHTML5&&n._iO.serverURL&&!n.connected)return n.getAutoPlay()||(r._wD(i+" Netstream not connected yet - setting autoPlay"),n.setAutoPlay(!0)),n;if(Ft(n._iO)&&(n._setup_html5(n._iO),d()),1!==n.playState||n.paused||(a=n._iO.multiShot,a?r._wD(i+"Already playing (multi-shot)",1):(r._wD(i+"Already playing (one-shot)",1),n.isHTML5&&n.setPosition(n._iO.position),y=n)),null!==y)return y;if(e.url&&e.url!==n.url&&(n.readyState||n.isHTML5||8!==v||!w?n.load(n._iO):w=!1),n.loaded?r._wD(i.substr(0,i.lastIndexOf(":"))):0===n.readyState?(r._wD(i+"Attempting to load"),n.isHTML5||r.html5Only?n.isHTML5?n.load(n._iO):(r._wD(i+"Unsupported type. Exiting."),y=n):(n._iO.autoPlay=!0,n.load(n._iO)),n.instanceOptions=n._iO):2===n.readyState?(r._wD(i+"Could not load - exiting",2),y=n):r._wD(i+"Loading - attempting to play..."),null!==y)return y;if(!n.isHTML5&&9===v&&n.position>0&&n.position===n.duration&&(r._wD(i+"Sound at end, resetting to position:0"),e.position=0),n.paused&&n.position>=0&&(!n._iO.serverURL||n.position>0))r._wD(i+"Resuming from paused state",1),n.resume();else{if(n._iO=A(e,n._iO),(!n.isHTML5&&null!==n._iO.position&&n._iO.position>0||null!==n._iO.from&&n._iO.from>0||null!==n._iO.to)&&0===n.instanceCount&&0===n.playState&&!n._iO.serverURL){if(l=function(){n._iO=A(e,n._iO),n.play(n._iO)},n.isHTML5&&!n._html5_canplay?(r._wD(i+"Beginning load for non-zero offset case"),n.load({_oncanplay:l}),y=!1):n.isHTML5||n.loaded||n.readyState&&2===n.readyState||(r._wD(i+"Preloading for non-zero offset case"),n.load({onload:l}),y=!1),null!==y)return y;n._iO=_()}(!n.instanceCount||n._iO.multiShotEvents||n.isHTML5&&n._iO.multiShot&&!Rt||!n.isHTML5&&v>8&&!n.getAutoPlay())&&n.instanceCount++,n._iO.onposition&&0===n.playState&&f(n),n.playState=1,n.paused=!1,n.position=n._iO.position===t||isNaN(n._iO.position)?0:n._iO.position,n.isHTML5||(n._iO=pt(ct(n._iO))),n._iO.onplay&&o&&(n._iO.onplay.apply(n),h=!0),n.setVolume(n._iO.volume,!0),n.setPan(n._iO.pan,!0),n.isHTML5?n.instanceCount<2?(d(),s=n._setup_html5(),n.setPosition(n._iO.position),s.play()):(r._wD(n.id+": Cloning Audio() for instance #"+n.instanceCount+"..."),c=new Audio(n._iO.url),p=function(){kt.remove(c,"ended",p),n._onfinish(n),At(c),c=null},m=function(){kt.remove(c,"canplay",m);try{c.currentTime=n._iO.position/rn}catch(e){mt(n.id+": multiShot play() failed to apply position of "+n._iO.position/rn)}c.play()},kt.add(c,"ended",p),void 0!==n._iO.volume&&(c.volume=Math.max(0,Math.min(1,n._iO.volume/100))),n.muted&&(c.muted=!0),n._iO.position?kt.add(c,"canplay",m):c.play()):(g=u._start(n.id,n._iO.loops||1,9===v?n.position:n.position/rn,n._iO.multiShot||!1),9!==v||g||(r._wD(i+"No sound hardware, or 32-sound ceiling hit",2),n._iO.onplayerror&&n._iO.onplayerror.apply(n)))}return n},this.start=this.play,this.stop=function(e){var t=n._iO,o;return 1===n.playState&&(r._wD(n.id+": stop()"),n._onbufferchange(0),n._resetOnPosition(0),n.paused=!1,n.isHTML5||(n.playState=0),m(),t.to&&n.clearOnPosition(t.to),n.isHTML5?n._a&&(o=n.position,n.setPosition(0),n.position=o,n._a.pause(),n.playState=0,n._onTimer(),s()):(u._stop(n.id,e),t.serverURL&&n.unload()),n.instanceCount=0,n._iO={},t.onstop&&t.onstop.apply(n)),n},this.setAutoPlay=function(e){r._wD(n.id+": Autoplay turned "+(e?"on":"off")),n._iO.autoPlay=e,n.isHTML5||(u._setAutoPlay(n.id,e),e&&(n.instanceCount||1!==n.readyState||(n.instanceCount++,r._wD(n.id+": Incremented instance count to "+n.instanceCount))))},this.getAutoPlay=function(){return n._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var o,i,a=n.isHTML5?Math.max(e,0):Math.min(n.duration||n._iO.duration,Math.max(e,0));if(n.position=a,i=n.position/rn,n._resetOnPosition(n.position),n._iO.position=a,n.isHTML5){if(n._a){if(n._html5_canplay){if(n._a.currentTime!==i){r._wD(n.id+": setPosition("+i+")");try{n._a.currentTime=i,(0===n.playState||n.paused)&&n._a.pause()}catch(s){r._wD(n.id+": setPosition("+i+") failed: "+s.message,2)}}}else if(i)return r._wD(n.id+": setPosition("+i+"): Cannot seek yet, sound not ready",2),n;n.paused&&n._onTimer(!0)}}else o=9===v?n.position:i,n.readyState&&2!==n.readyState&&u._setPosition(n.id,o,n.paused||!n.playState,n._iO.multiShot);return n},this.pause=function(e){return n.paused||0===n.playState&&1!==n.readyState?n:(r._wD(n.id+": pause()"),n.paused=!0,n.isHTML5?(n._setup_html5().pause(),s()):(e||e===t)&&u._pause(n.id,n._iO.multiShot),n._iO.onpause&&n._iO.onpause.apply(n),n)},this.resume=function(){var e=n._iO;return n.paused?(r._wD(n.id+": resume()"),n.paused=!1,n.playState=1,n.isHTML5?(n._setup_html5().play(),d()):(e.isMovieStar&&!e.serverURL&&n.setPosition(n.position),u._pause(n.id,e.multiShot)),!h&&e.onplay?(e.onplay.apply(n),h=!0):e.onresume&&e.onresume.apply(n),n):n},this.togglePause=function(){return r._wD(n.id+": togglePause()"),0===n.playState?(n.play({position:9!==v||n.isHTML5?n.position/rn:n.position}),n):(n.paused?n.resume():n.pause(),n)},this.setPan=function(e,o){return e===t&&(e=0),o===t&&(o=!1),n.isHTML5||u._setPan(n.id,e),n._iO.pan=e,o||(n.pan=e,n.options.pan=e),n},this.setVolume=function(e,o){return e===t&&(e=100),o===t&&(o=!1),n.isHTML5?n._a&&(r.muted&&!n.muted&&(n.muted=!0,n._a.muted=!0),n._a.volume=Math.max(0,Math.min(1,e/100))):u._setVolume(n.id,r.muted&&!n.muted||n.muted?0:e),n._iO.volume=e,o||(n.volume=e,n.options.volume=e),n},this.mute=function(){return n.muted=!0,n.isHTML5?n._a&&(n._a.muted=!0):u._setVolume(n.id,0),n},this.unmute=function(){n.muted=!1;var e=n._iO.volume!==t;return n.isHTML5?n._a&&(n._a.muted=!1):u._setVolume(n.id,e?n._iO.volume:n.options.volume),n},this.toggleMute=function(){return n.muted?n.unmute():n.mute()},this.onPosition=function(e,o,i){return c.push({position:parseInt(e,10),method:o,scope:i!==t?i:n,fired:!1}),n},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<c.length;n++)e===c[n].position&&(t&&t!==c[n].method||(c[n].fired&&p--,c.splice(n,1)))},this._processOnPosition=function(){var e,t,o=c.length;if(!o||!n.playState||p>=o)return!1;for(e=o-1;e>=0;e--)t=c[e],!t.fired&&n.position>=t.position&&(t.fired=!0,p++,t.method.apply(t.scope,[t.position]),o=c.length);return!0},this._resetOnPosition=function(e){var t,n,o=c.length;if(!o)return!1;for(t=o-1;t>=0;t--)n=c[t],n.fired&&e<=n.position&&(n.fired=!1,p--);return!0},_=function(){var e=n._iO,t=e.from,o=e.to,i,a;return a=function(){r._wD(n.id+': "To" time of '+o+" reached."),n.clearOnPosition(o,a),n.stop()},i=function(){r._wD(n.id+': Playing "from" '+t),null===o||isNaN(o)||n.onPosition(o,a)},null===t||isNaN(t)||(e.position=t,e.multiShot=!1,i()),e},f=function(){var e,t=n._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&n.onPosition(parseInt(e,10),t[e])},m=function(){var e,t=n._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&n.clearOnPosition(parseInt(e,10))},d=function(){n.isHTML5&&wt(n)},s=function(){n.isHTML5&&vt(n)},o=function(e){e||(c=[],p=0),h=!1,n._hasTimer=null,n._a=null,n._html5_canplay=!1,n.bytesLoaded=null,n.bytesTotal=null,n.duration=n._iO&&n._iO.duration?n._iO.duration:null,n.durationEstimate=null,n.buffered=[],n.eqData=[],n.eqData.left=[],n.eqData.right=[],n.failures=0,n.isBuffering=!1,n.instanceOptions={},n.instanceCount=0,n.loaded=!1,n.metadata={},n.readyState=0,n.muted=!1,n.paused=!1,n.peakData={left:0,right:0},n.waveformData={left:[],right:[]},n.playState=0,n.position=null,n.id3={}},o(),this._onTimer=function(e){var t,o=!1,i,a={};return n._hasTimer||e?(n._a&&(e||(n.playState>0||1===n.readyState)&&!n.paused)&&(t=n._get_html5_duration(),t!==y.duration&&(y.duration=t,n.duration=t,o=!0),n.durationEstimate=n.duration,i=n._a.currentTime*rn||0,i!==y.time&&(y.time=i,o=!0),(o||e)&&n._whileplaying(i,a,a,a,a)),o):void 0},this._get_html5_duration=function(){var e=n._iO,t=n._a&&n._a.duration?n._a.duration*rn:e&&e.duration?e.duration:null,o=t&&!isNaN(t)&&1/0!==t?t:null;return o},this._apply_loop=function(e,t){!e.loop&&t>1&&r._wD("Note: Native HTML5 looping is infinite.",1),e.loop=t>1?"loop":""},this._setup_html5=function(e){var t=A(n._iO,e),a=Rt?l:n._a,s=decodeURI(t.url),r;if(Rt?s===decodeURI(Nt)&&(r=!0):s===decodeURI(g)&&(r=!0),a){if(a._s)if(Rt)a._s&&a._s.playState&&!r&&a._s.stop();else if(!Rt&&s===decodeURI(g))return n._apply_loop(a,t.loops),a;r||(g&&o(!1),a.src=t.url,n.url=t.url,g=t.url,Nt=t.url,a._called_load=!1)}else t.autoLoad||t.autoPlay?(n._a=new Audio(t.url),n._a.load()):n._a=Zt&&opera.version()<10?new Audio(null):new Audio,a=n._a,a._called_load=!1,Rt&&(l=a);return n.isHTML5=!0,n._a=a,a._s=n,i(),n._apply_loop(a,t.loops),t.autoLoad||t.autoPlay?n.load():(a.autobuffer=!1,a.preload="auto"),a},i=function(){function e(e,t,o){return n._a?n._a.addEventListener(e,t,o||!1):null}if(n._a._added_events)return!1;var t;n._a._added_events=!0;for(t in Wt)Wt.hasOwnProperty(t)&&e(t,Wt[t]);return!0},a=function(){function e(e,t,o){return n._a?n._a.removeEventListener(e,t,o||!1):null}var t;r._wD(n.id+": Removing event listeners"),n._a._added_events=!1;for(t in Wt)Wt.hasOwnProperty(t)&&e(t,Wt[t])},this._onload=function(e){var t,o=!!e||!n.isHTML5&&8===v&&n.duration;return t=n.id+": ",r._wD(t+(o?"onload()":"Failed to load / invalid sound?"+(n.duration?" -":" Zero-length duration reported.")+" ("+n.url+")"),o?1:2),o||n.isHTML5||(r.sandbox.noRemote===!0&&r._wD(t+lt("noNet"),1),r.sandbox.noLocal===!0&&r._wD(t+lt("noLocal"),1)),n.loaded=o,n.readyState=o?3:2,n._onbufferchange(0),n._iO.onload&&Qt(n,function(){n._iO.onload.apply(n,[o])}),!0},this._onbufferchange=function(e){return 0===n.playState?!1:e&&n.isBuffering||!e&&!n.isBuffering?!1:(n.isBuffering=1===e,n._iO.onbufferchange&&(r._wD(n.id+": Buffer state change: "+e),n._iO.onbufferchange.apply(n,[e])),!0)},this._onsuspend=function(){return n._iO.onsuspend&&(r._wD(n.id+": Playback suspended"),n._iO.onsuspend.apply(n)),!0},this._onfailure=function(e,t,o){n.failures++,r._wD(n.id+": Failure ("+n.failures+"): "+e),n._iO.onfailure&&1===n.failures?n._iO.onfailure(e,t,o):r._wD(n.id+": Ignoring failure")},this._onwarning=function(e,t,o){n._iO.onwarning&&n._iO.onwarning(e,t,o)},this._onfinish=function(){var e=n._iO.onfinish;n._onbufferchange(0),n._resetOnPosition(0),n.instanceCount&&(n.instanceCount--,n.instanceCount||(m(),n.playState=0,n.paused=!1,n.instanceCount=0,n.instanceOptions={},n._iO={},s(),n.isHTML5&&(n.position=0)),(!n.instanceCount||n._iO.multiShotEvents)&&e&&(r._wD(n.id+": onfinish()"),Qt(n,function(){e.apply(n)})))},this._whileloading=function(e,t,o,i){var a=n._iO;n.bytesLoaded=e,n.bytesTotal=t,n.duration=Math.floor(o),n.bufferLength=i,n.durationEstimate=n.isHTML5||a.isMovieStar?n.duration:a.duration?n.duration>a.duration?n.duration:a.duration:parseInt(n.bytesTotal/n.bytesLoaded*n.duration,10),n.isHTML5||(n.buffered=[{start:0,end:n.duration}]),(3!==n.readyState||n.isHTML5)&&a.whileloading&&a.whileloading.apply(n)},this._whileplaying=function(e,o,i,a,s){var r=n._iO,l;return isNaN(e)||null===e?!1:(n.position=Math.max(0,e),n._processOnPosition(),!n.isHTML5&&v>8&&(r.usePeakData&&o!==t&&o&&(n.peakData={left:o.leftPeak,right:o.rightPeak}),r.useWaveformData&&i!==t&&i&&(n.waveformData={left:i.split(","),right:a.split(",")}),r.useEQData&&s!==t&&s&&s.leftEQ&&(l=s.leftEQ.split(","),n.eqData=l,n.eqData.left=l,s.rightEQ!==t&&s.rightEQ&&(n.eqData.right=s.rightEQ.split(",")))),1===n.playState&&(n.isHTML5||8!==v||n.position||!n.isBuffering||n._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(n)),!0)},this._oncaptiondata=function(e){r._wD(n.id+": Caption data received."),n.captiondata=e,n._iO.oncaptiondata&&n._iO.oncaptiondata.apply(n,[e])},this._onmetadata=function(e,t){r._wD(n.id+": Metadata received.");var o={},i,a;for(i=0,a=e.length;a>i;i++)o[e[i]]=t[i];n.metadata=o,console.log("updated metadata",n.metadata),n._iO.onmetadata&&n._iO.onmetadata.call(n,n.metadata)},this._onid3=function(e,t){r._wD(n.id+": ID3 data received.");var o=[],i,a;for(i=0,a=e.length;a>i;i++)o[e[i]]=t[i];n.id3=A(n.id3,o),n._iO.onid3&&n._iO.onid3.apply(n)},this._onconnect=function(e){e=1===e,r._wD(n.id+": "+(e?"Connected.":"Failed to connect? - "+n.url),e?1:2),n.connected=e,e&&(n.failures=0,_t(n.id)&&(n.getAutoPlay()?n.play(t,n.getAutoPlay()):n._iO.autoLoad&&n.load()),n._iO.onconnect&&n._iO.onconnect.apply(n,[e]))},this._ondataerror=function(e){n.playState>0&&(r._wD(n.id+": Data error: "+e),n._iO.ondataerror&&n._iO.ondataerror.apply(n))},this._debug()},z=function(){return _.body||_.getElementsByTagName("div")[0]},c=function(e){return _.getElementById(e)},A=function(e,n){var o=e||{},i,a;i=n===t?r.defaultOptions:n;for(a in i)i.hasOwnProperty(a)&&o[a]===t&&(o[a]="object"!=typeof i[a]||null===i[a]?i[a]:A(o[a],i[a]));return o},Qt=function(t,n){t.isHTML5||8!==v?n():e.setTimeout(n,0)},C={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},E=function(e,n){var o,i=!0,a=n!==t,s=r.setupOptions,l=C;if(e===t){i=[];for(o in s)s.hasOwnProperty(o)&&i.push(o);for(o in l)l.hasOwnProperty(o)&&i.push("object"==typeof r[o]?o+": {...}":r[o]instanceof Function?o+": function() {...}":o);return r._wD(lt("setup",i.join(", "))),!1}for(o in e)if(e.hasOwnProperty(o))if("object"!=typeof e[o]||null===e[o]||e[o]instanceof Array||e[o]instanceof RegExp)a&&l[n]!==t?r[n][o]=e[o]:s[o]!==t?(r.setupOptions[o]=e[o],r[o]=e[o]):l[o]===t?(mt(lt(r[o]===t?"setupUndef":"setupError",o),2),i=!1):r[o]instanceof Function?r[o].apply(r,e[o]instanceof Array?e[o]:[e[o]]):r[o]=e[o];else{if(l[o]!==t)return E(e[o],o);mt(lt(r[o]===t?"setupUndef":"setupError",o),2),i=!1}return i},kt=function(){function t(e){var t=xt.call(e),n=t.length;return a?(t[1]="on"+t[1],n>3&&t.pop()):3===n&&t.push(!1),t}function n(e,t){var n=e.shift(),o=[s[t]];a?n[o](e[0],e[1]):n[o].apply(n,e)}function o(){n(t(arguments),"add")}function i(){n(t(arguments),"remove")}var a=e.attachEvent,s={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:o,remove:i}}(),Wt={abort:a(function(){r._wD(this._s.id+": abort")}),canplay:a(function(){var e=this._s,n;if(e._html5_canplay)return!0;if(e._html5_canplay=!0,r._wD(e.id+": canplay"),e._onbufferchange(0),n=e._iO.position===t||isNaN(e._iO.position)?null:e._iO.position/rn,this.currentTime!==n){r._wD(e.id+": canplay: Setting position to "+n);try{this.currentTime=n}catch(o){r._wD(e.id+": canplay: Setting position of "+n+" failed: "+o.message,2)}}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:a(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:a(function(){var e=this._s,t;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(r._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:a(function(){var e=this._s;r._wD(e.id+": ended"),e._onfinish()}),error:a(function(){r._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:a(function(){var e=this._s;r._wD(e.id+": loadeddata"),e._loaded||Gt||(e.duration=e._get_html5_duration())}),loadedmetadata:a(function(){r._wD(this._s.id+": loadedmetadata")}),loadstart:a(function(){r._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){r._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:a(function(e){var t=this._s,n,o,i,a=0,s="progress"===e.type,l=e.target.buffered,u=e.loaded||0,d=e.total||1;if(t.buffered=[],l&&l.length){for(n=0,o=l.length;o>n;n++)t.buffered.push({start:l.start(n)*rn,end:l.end(n)*rn});if(a=(l.end(0)-l.start(0))*rn,u=Math.min(1,a/(e.target.duration*rn)),s&&l.length>1){for(i=[],o=l.length,n=0;o>n;n++)i.push(e.target.buffered.start(n)*rn+"-"+e.target.buffered.end(n)*rn);r._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}s&&!isNaN(u)&&r._wD(this._s.id+": progress, "+Math.floor(100*u)+"% loaded")}isNaN(u)||(t._whileloading(u,d,t._get_html5_duration()),u&&d&&u===d&&Wt.canplaythrough.call(this,e))}),ratechange:a(function(){r._wD(this._s.id+": ratechange")}),suspend:a(function(e){var t=this._s;r._wD(this._s.id+": suspend"),Wt.progress.call(this,e),t._onsuspend()}),stalled:a(function(){r._wD(this._s.id+": stalled")}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){var e=this._s;r._wD(this._s.id+": waiting"),e._onbufferchange(1)})},Ft=function(e){var t;return t=e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&i(e.type)?!1:e.type?It({type:e.type}):It({url:e.url})||r.html5Only||e.url.match(/data\:/i):!1},At=function(e){var t;return e&&(t=Gt?ln:r.html5.canPlayType("audio/wav")?un:ln,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),Rt&&(Nt=null),t},It=function(e){if(!r.useHTML5Audio||!r.hasHTML5)return!1;var n=e.url||null,o=e.type||null,a=r.audioFormats,s,l,u,d;if(o&&r.html5[o]!==t)return r.html5[o]&&!i(o);if(!Ht){Ht=[];for(d in a)a.hasOwnProperty(d)&&(Ht.push(d),a[d].related&&(Ht=Ht.concat(a[d].related)));Ht=new RegExp("\\.("+Ht.join("|")+")(\\?.*)?$","i")}return u=n?n.toLowerCase().match(Ht):null,u&&u.length?u=u[1]:o?(l=o.indexOf(";"),u=(-1!==l?o.substr(0,l):o).substr(6)):s=!1,u&&r.html5[u]!==t?s=r.html5[u]&&!i(u):(o="audio/"+u,s=r.html5.canPlayType({type:o}),r.html5[u]=s,s=s&&r.html5[o]&&!i(o)),s},Ct=function(){function e(e){var t,o,i=!1,a=!1;if(!n||"function"!=typeof n.canPlayType)return i;if(e instanceof Array){for(l=0,o=e.length;o>l;l++)(r.html5[e[l]]||n.canPlayType(e[l]).match(r.html5Test))&&(a=!0,r.html5[e[l]]=!0,r.flash[e[l]]=!!e[l].match(sn));i=a}else t=n&&"function"==typeof n.canPlayType?n.canPlayType(e):!1,i=!(!t||!t.match(r.html5Test));return i}if(!r.useHTML5Audio||!r.hasHTML5)return r.html5.usingFlash=!0,Pt=!0,!1;var n=Audio!==t?Zt&&opera.version()<10?new Audio(null):new Audio:null,o,i,a={},s,l;s=r.audioFormats;for(o in s)if(s.hasOwnProperty(o)&&(i="audio/"+o,a[o]=e(s[o].type),a[i]=a[o],o.match(sn)?(r.flash[o]=!0,r.flash[i]=!0):(r.flash[o]=!1,r.flash[i]=!1),s[o]&&s[o].related))for(l=s[o].related.length-1;l>=0;l--)a["audio/"+s[o].related[l]]=a[o],r.html5[s[o].related[l]]=a[o],r.flash[s[o].related[l]]=a[o];return a.canPlayType=n?e:null,r.html5=A(r.html5,a),r.html5.usingFlash=St(),Pt=r.html5.usingFlash,!0},q={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:d+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:f+"Verify that %s is a valid path.",tryDebug:"Try "+d+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:f+"Non-HTTP page ("+_.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:f+"Special case: Waiting for SWF to load with window focus...",waitForever:f+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:f+"Waiting for 100% SWF load...",needFunction:f+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:f+"_debug(): Current sound objects",waitOnload:f+"Waiting for window.onload()",docLoaded:f+"Document already loaded",onload:f+"initComplete(): calling soundManager.onload()",onloadOK:d+".onload() complete",didInit:f+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:f+"Failed to remove Flash node.",shutdown:d+".disable(): Shutting down",queue:f+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+ft.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:f+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:d+".load(): current URL already assigned.",badFV:d+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:f+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:f+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:d+".setup(): allowed parameters: %s",setupError:d+'.setup(): "%s" cannot be assigned with this method.',setupUndef:d+'.setup(): Could not find option "%s"',setupLate:d+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:f+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:d+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},lt=function(){var e,t,n,o,i;
if(e=xt.call(arguments),o=e.shift(),i=q&&q[o]?q[o]:"",i&&e&&e.length)for(t=0,n=e.length;n>t;t++)i=i.replace("%s",e[t]);return i},ct=function(e){return 8===v&&e.loops>1&&e.stream&&(F("as2loop"),e.stream=!1),e},pt=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(r._wD((t||"")+lt("policy")),e.usePolicyFile=!0),e},mt=function(e){tn&&console.warn!==t?console.warn(e):r._wD(e)},g=function(){return!1},ot=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=g);t=null},it=function(e){e===t&&(e=!1),(P||e)&&r.disable(e)},at=function(e){var t=null,n;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return n=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+r.movieURL,r.noSWFCache&&(n+="?ts="+(new Date).getTime()),n},j=function(){v=parseInt(r.flashVersion,10),8!==v&&9!==v&&(r._wD(lt("badFV",v,nt)),r.flashVersion=v=nt);var e=r.debugMode||r.debugFlash?"_debug.swf":".swf";r.useHTML5Audio&&!r.html5Only&&r.audioFormats.mp4.required&&9>v&&(r._wD(lt("needfl9")),r.flashVersion=v=9),r.version=r.versionNumber+(r.html5Only?" (HTML5-only mode)":9===v?" (AS3/Flash 9)":" (AS2/Flash 8)"),v>8?(r.defaultOptions=A(r.defaultOptions,r.flash9Options),r.features.buffering=!0,r.defaultOptions=A(r.defaultOptions,r.movieStarOptions),r.filePatterns.flash9=new RegExp("\\.(mp3|"+cn.join("|")+")(\\?.*)?$","i"),r.features.movieStar=!0):r.features.movieStar=!1,r.filePattern=r.filePatterns[8!==v?"flash9":"flash8"],r.movieURL=(8===v?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),r.features.peakData=r.features.waveformData=r.features.eqData=v>8},Y=function(e,t){return u?void u._setPolling(e,t):!1},et=function(){if(r.debugURLParam.test(m)&&(r.debugMode=!0),c(r.debugID))return!1;var e,t,n,o,i;if(!(!r.debugMode||c(r.debugID)||tn&&r.useConsole&&r.consoleOnly)){e=_.createElement("div"),e.id=r.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(_.createTextNode("-")),e.onclick=ht,e.title="Toggle SM2 debug console",p.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(i in o)o.hasOwnProperty(i)&&(e.style[i]=o[i]);if(t=_.createElement("div"),t.id=r.debugID,t.style.display=r.debugMode?"block":"none",r.debugMode&&!c(e.id)){try{n=z(),n.appendChild(e)}catch(a){throw new Error(lt("domError")+" \n"+a.toString())}n.appendChild(t)}}n=null},_t=this.getSoundById,F=function(e,t){return e?r._wD(lt(e),t):""},ht=function(){var e=c(r.debugID),t=c(r.debugID+"-toggle");return e?(b?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),void(b=!b)):!1},D=function(n,o,i){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(n,o,i)}catch(a){return!1}return!0},dt=function(){var e=[];return r.debugMode&&e.push(ft.sm2Debug),r.debugFlash&&e.push(ft.flashDebug),r.useHighPerformance&&e.push(ft.highPerf),e.join(" ")},ut=function(){var e=lt("fbHandler"),t=r.getMoviePercent(),n=ft,o={type:"FLASHBLOCK"};return r.html5Only?!1:void(r.ok()?(r.didFlashBlock&&r._wD(e+": Unblocked"),r.oMC&&(r.oMC.className=[dt(),n.swfDefault,n.swfLoaded+(r.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(Pt&&(r.oMC.className=dt()+" "+n.swfDefault+" "+(null===t?n.swfTimedout:n.swfError),r._wD(e+": "+lt("fbTimeout")+(t?" ("+lt("fbLoaded")+")":""))),r.didFlashBlock=!0,x({type:"ontimeout",ignoreInit:!0,error:o}),Z(o)))},k=function(e,n,o){O[e]===t&&(O[e]=[]),O[e].push({method:n,scope:o||null,fired:!1})},x=function(e){if(e||(e={type:r.ok()?"onready":"ontimeout"}),!T&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(r.ok()||P&&!e.ignoreInit))return!1;var t={success:e&&e.ignoreInit?r.ok():!P},n=e&&e.type?O[e.type]||[]:[],o=[],i,a,s=[t],l=Pt&&!r.ok();for(e.error&&(s[0].error=e.error),i=0,a=n.length;a>i;i++)n[i].fired!==!0&&o.push(n[i]);if(o.length)for(i=0,a=o.length;a>i;i++)o[i].scope?o[i].method.apply(o[i].scope,s):o[i].method.apply(this,s),l||(o[i].fired=!0);return!0},R=function(){e.setTimeout(function(){r.useFlashBlock&&ut(),x(),"function"==typeof r.onload&&(F("onload",1),r.onload.apply(e),F("onloadOK",1)),r.waitForWindowLoad&&kt.add(e,"load",R)},1)},Bt=function(){if(Ut!==t)return Ut;var n=!1,o=navigator,i=o.plugins,a,s,r,l=e.ActiveXObject;if(i&&i.length)s="application/x-shockwave-flash",r=o.mimeTypes,r&&r[s]&&r[s].enabledPlugin&&r[s].enabledPlugin.description&&(n=!0);else if(l!==t&&!p.match(/MSAppHost/i)){try{a=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){a=null}n=!!a,a=null}return Ut=n,n},St=function(){var e,t,n=r.audioFormats,o=$t&&!!p.match(/os (1|2|3_0|3_1)\s/i);if(o?(r.hasHTML5=!1,r.html5Only=!0,r.oMC&&(r.oMC.style.display="none")):r.useHTML5Audio&&(r.html5&&r.html5.canPlayType||(r._wD("SoundManager: No HTML5 Audio() support detected."),r.hasHTML5=!1),en&&r._wD(f+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Ut?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),r.useHTML5Audio&&r.hasHTML5){Tt=!0;for(t in n)n.hasOwnProperty(t)&&n[t].required&&(r.html5.canPlayType(n[t].type)?r.preferFlash&&(r.flash[t]||r.flash[n[t].type])&&(e=!0):(Tt=!1,e=!0))}return r.ignoreFlash&&(e=!1,Tt=!0),r.html5Only=r.hasHTML5&&r.useHTML5Audio&&!e,!r.html5Only},Mt=function(e){var t,n,o=0,i;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(r.canPlayMIME(e[t].type)){o=t;break}}else if(r.canPlayURL(e[t])){o=t;break}e[o].url&&(e[o]=e[o].url),i=e[o]}else i=e;return i},wt=function(e){e._hasTimer||(e._hasTimer=!0,!Yt&&r.html5PollingInterval&&(null===Dt&&0===bt&&(Dt=setInterval(Ot,r.html5PollingInterval)),bt++))},vt=function(e){e._hasTimer&&(e._hasTimer=!1,!Yt&&r.html5PollingInterval&&bt--)},Ot=function(){var e;if(null!==Dt&&!bt)return clearInterval(Dt),Dt=null,!1;for(e=r.soundIDs.length-1;e>=0;e--)r.sounds[r.soundIDs[e]].isHTML5&&r.sounds[r.soundIDs[e]]._hasTimer&&r.sounds[r.soundIDs[e]]._onTimer()},Z=function(n){n=n!==t?n:{},"function"==typeof r.onerror&&r.onerror.apply(e,[{type:n.type!==t?n.type:null}]),n.fatal!==t&&n.fatal&&r.disable()},jt=function(){if(!en||!Bt())return!1;var e=r.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&("mp3"===n||"mp4"===n)&&(r._wD(d+": Using flash fallback for "+n+" format"),r.html5[n]=!1,e[n]&&e[n].related))for(t=e[n].related.length-1;t>=0;t--)r.html5[e[n].related[t]]=!1},this._setSandboxType=function(e){var n=r.sandbox;n.type=e,n.description=n.types[n.types[e]!==t?e:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,F("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(e){if(r.swfLoaded)return!1;var t;return D("swf",!0),D("flashtojs",!0),r.swfLoaded=!0,on=!1,en&&jt(),e&&e.replace(/\+dev/i,"")===r.versionNumber.replace(/\+dev/i,"")?void setTimeout(w,Xt?100:1):(t=d+': Fatal: JavaScript file build "'+r.versionNumber+'" does not match Flash SWF build "'+e+'" at '+r.url+". Ensure both are up-to-date.",setTimeout(function n(){throw new Error(t)},0),!1)},G=function(e,n){function o(){var e=[],t,n=[],o=" + ";t="SoundManager "+r.version+(!r.html5Only&&r.useHTML5Audio?r.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),r.html5Only?r.html5PollingInterval&&e.push("html5PollingInterval ("+r.html5PollingInterval+"ms)"):(r.preferFlash&&e.push("preferFlash"),r.useHighPerformance&&e.push("useHighPerformance"),r.flashPollingInterval&&e.push("flashPollingInterval ("+r.flashPollingInterval+"ms)"),r.html5PollingInterval&&e.push("html5PollingInterval ("+r.html5PollingInterval+"ms)"),r.wmode&&e.push("wmode ("+r.wmode+")"),r.debugFlash&&e.push("debugFlash"),r.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(o)])),r._wD(t+(n.length?o+n.join(", "):""),1),qt()}function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(M&&L)return!1;if(r.html5Only)return j(),o(),r.oMC=c(r.movieID),w(),M=!0,L=!0,!1;var a=n||r.url,s=r.altURL||a,l="JS/Flash audio component (SoundManager 2)",u=z(),d=dt(),f=null,h=_.getElementsByTagName("html")[0],m,g,y,v,O,b,D,T;if(f=h&&h.dir&&h.dir.match(/rtl/i),e=e===t?r.id:e,j(),r.url=at(dn?a:s),n=r.url,r.wmode=!r.wmode&&r.useHighPerformance?"transparent":r.wmode,null!==r.wmode&&(p.match(/msie 8/i)||!Xt&&!r.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Lt.push(q.spcWmode),r.wmode=null),m={name:e,id:e,src:n,quality:"high",allowScriptAccess:r.allowScriptAccess,bgcolor:r.bgColor,pluginspage:fn+"www.macromedia.com/go/getflashplayer",title:l,type:"application/x-shockwave-flash",wmode:r.wmode,hasPriority:"true"},r.debugFlash&&(m.FlashVars="debug=1"),r.wmode||delete m.wmode,Xt)g=_.createElement("div"),v=['<object id="'+e+'" data="'+n+'" type="'+m.type+'" title="'+m.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+fn+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",r.allowScriptAccess),i("quality",m.quality),r.wmode?i("wmode",r.wmode):"",i("bgcolor",r.bgColor),i("hasPriority","true"),r.debugFlash?i("FlashVars",m.FlashVars):"","</object>"].join("");else{g=_.createElement("embed");for(y in m)m.hasOwnProperty(y)&&g.setAttribute(y,m[y])}if(et(),d=dt(),u=z())if(r.oMC=c(r.movieID)||_.createElement("div"),r.oMC.id)T=r.oMC.className,r.oMC.className=(T?T+" ":ft.swfDefault)+(d?" "+d:""),r.oMC.appendChild(g),Xt&&(O=r.oMC.appendChild(_.createElement("div")),O.className=ft.swfBox,O.innerHTML=v),L=!0;else{if(r.oMC.id=r.movieID,r.oMC.className=ft.swfDefault+" "+d,b=null,O=null,r.useFlashBlock||(r.useHighPerformance?b={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(b={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(b.left=Math.abs(parseInt(b.left,10))+"px"))),zt&&(r.oMC.style.zIndex=1e4),!r.debugFlash)for(D in b)b.hasOwnProperty(D)&&(r.oMC.style[D]=b[D]);try{Xt||r.oMC.appendChild(g),u.appendChild(r.oMC),Xt&&(O=r.oMC.appendChild(_.createElement("div")),O.className=ft.swfBox,O.innerHTML=v),L=!0}catch(P){throw new Error(lt("domError")+" \n"+P.toString())}}return M=!0,o(),!0},V=function(){return r.html5Only?(G(),!1):u?!1:r.url?(u=r.getMovie(r.id),u||(st?(Xt?r.oMC.innerHTML=rt:r.oMC.appendChild(st),st=null,M=!0):G(r.id,r.url),u=r.getMovie(r.id)),"function"==typeof r.oninitmovie&&setTimeout(r.oninitmovie,1),Vt(),!0):(F("noURL"),!1)},N=function(){setTimeout(U,1e3)},B=function(){e.setTimeout(function(){mt(f+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),r.setup({preferFlash:!1}).reboot(),r.didFlashBlock=!0,r.beginDelayedInit()},1)},U=function(){var t,n=!1;return r.url?gt?!1:(gt=!0,kt.remove(e,"load",N),Ut&&on&&!nn?(F("waitFocus"),!1):(T||(t=r.getMoviePercent(),t>0&&100>t&&(n=!0)),void setTimeout(function(){return t=r.getMoviePercent(),n?(gt=!1,r._wD(lt("waitSWF")),e.setTimeout(N,1),!1):(T||(r._wD(d+": No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(r.debugFlash?" "+lt("checkSWF"):""),2),!dn&&t&&(F("localFail",2),r.debugFlash||F("tryDebug",2)),0===t&&r._wD(lt("swf404",r.url),1),D("flashtojs",!1," (Check flash security or flash blockers)")),void(!T&&an&&(null===t?r.useFlashBlock||0===r.flashLoadTimeout?(r.useFlashBlock&&ut(),F("waitForever")):!r.useFlashBlock&&Tt?B():(F("waitForever"),x({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===r.flashLoadTimeout?F("waitForever"):!r.useFlashBlock&&Tt?B():it(!0))))},r.flashLoadTimeout))):!1},W=function(){function t(){kt.remove(e,"focus",W)}return nn||!on?(t(),!0):(an=!0,nn=!0,F("gotFocus"),gt=!1,N(),t(),!0)},Vt=function(){Lt.length&&(r._wD("SoundManager 2: "+Lt.join(" "),1),Lt=[])},qt=function(){Vt();var e,t=[];if(r.useHTML5Audio&&r.hasHTML5){for(e in r.audioFormats)r.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+r.html5[e]+(!r.html5[e]&&Pt&&r.flash[e]?" (using flash)":r.preferFlash&&r.flash[e]&&Pt?" (preferring flash)":r.html5[e]?"":" ("+(r.audioFormats[e].required?"required, ":"")+"and no flash support)"));r._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},H=function(t){if(T)return!1;if(r.html5Only)return F("sm2Loaded",1),T=!0,R(),D("onload",!0),!0;var n=r.useFlashBlock&&r.flashLoadTimeout&&!r.getMoviePercent(),o=!0,i;return n||(T=!0),i={type:!Ut&&Pt?"NO_FLASH":"INIT_TIMEOUT"},r._wD("SoundManager 2 "+(P?"failed to load":"loaded")+" ("+(P?"Flash security/load error":"OK")+") "+String.fromCharCode(P?10006:10003),P?2:1),P||t?(r.useFlashBlock&&r.oMC&&(r.oMC.className=dt()+" "+(null===r.getMoviePercent()?ft.swfTimedout:ft.swfError)),x({type:"ontimeout",error:i,ignoreInit:!0}),D("onload",!1),Z(i),o=!1):D("onload",!0),P||(r.waitForWindowLoad&&!S?(F("waitOnload"),kt.add(e,"load",R)):(r.waitForWindowLoad&&S&&F("docLoaded"),R())),o},y=function(){var e,n=r.setupOptions;for(e in n)n.hasOwnProperty(e)&&(r[e]===t?r[e]=n[e]:r[e]!==n[e]&&(r.setupOptions[e]=r[e]))},w=function(){function t(){kt.remove(e,"load",r.beginDelayedInit)}if(T)return F("didInit"),!1;if(r.html5Only)return T||(t(),r.enabled=!0,H()),!0;V();try{u._externalInterfaceTest(!1),Y(!0,r.flashPollingInterval||(r.useHighPerformance?10:50)),r.debugMode||u._disableDebug(),r.enabled=!0,D("jstoflash",!0),r.html5Only||kt.add(e,"unload",g)}catch(n){return r._wD("js/flash exception: "+n.toString()),D("jstoflash",!1),Z({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),it(!0),H(),!1}return H(),t(),!0},K=function(){return X?!1:(X=!0,y(),et(),function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",n=null,o=null,i=m.toLowerCase();-1!==i.indexOf(e)&&(n="1"===i.charAt(i.indexOf(e)+e.length),tn&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),r.setup({useHTML5Audio:n})),-1!==i.indexOf(t)&&(o="1"===i.charAt(i.indexOf(t)+t.length),tn&&console.log((o?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),r.setup({preferFlash:o}))}(),!Ut&&r.hasHTML5&&(r._wD("SoundManager 2: No Flash detected"+(r.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),r.setup({useHTML5Audio:!0,preferFlash:!1})),Ct(),!Ut&&Pt&&(Lt.push(q.needFlash),r.setup({flashLoadTimeout:1})),_.removeEventListener&&_.removeEventListener("DOMContentLoaded",K,!1),V(),!0)},Et=function(){return"complete"===_.readyState&&(K(),_.detachEvent("onreadystatechange",Et)),!0},J=function(){S=!0,K(),kt.remove(e,"load",J)},Q=function(){Yt&&((!r.setupOptions.useHTML5Audio||r.setupOptions.preferFlash)&&Lt.push(q.mobileUA),r.setupOptions.useHTML5Audio=!0,r.setupOptions.preferFlash=!1,($t||Jt&&!p.match(/android\s2\.3/i))&&(Lt.push(q.globalHTML5),$t&&(r.ignoreFlash=!0),Rt=!0))},Q(),Bt(),kt.add(e,"focus",W),kt.add(e,"load",N),kt.add(e,"load",J),_.addEventListener?_.addEventListener("DOMContentLoaded",K,!1):_.attachEvent?_.attachEvent("onreadystatechange",Et):(D("onload",!1),Z({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!e||!e.document)throw new Error("SoundManager requires a browser with window and document objects.");var o=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(o=new n),"object"==typeof module&&module&&"object"==typeof module.exports?(e.soundManager=o,module.exports.SoundManager=n,module.exports.soundManager=o):"function"==typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:n,soundManager:o}}):(e.SoundManager=n,e.soundManager=o)}(window);