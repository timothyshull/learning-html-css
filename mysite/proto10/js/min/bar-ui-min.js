!function(e){"use strict";var t,n=[],a=".sm2-bar-ui",r;soundManager.setup({html5PollingInterval:50,flashVersion:9}),soundManager.onready(function(){var e,o,l;if(e=r.dom.getAll(a),e&&e.length)for(o=0,l=e.length;l>o;o++)n.push(new t(e[o]))}),r={array:function(){function e(e){var t;return function(n,a){return t=n[e]<a[e]?-1:n[e]>a[e]?1:0}}function t(e){var t,n,a;for(t=e.length-1;t>0;t--)n=Math.floor(Math.random()*(t+1)),a=e[t],e[t]=e[n],e[n]=a;return e}return{compare:e,shuffle:t}}(),css:function(){function e(e,t){return void 0!==e.className?new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className):!1}function t(t,n){return t&&n&&!e(t,n)?void(t.className=(t.className?t.className+" ":"")+n):!1}function n(t,n){return t&&n&&e(t,n)?void(t.className=t.className.replace(new RegExp("( "+n+")|("+n+")","g"),"")):!1}function a(e,a,r){var o={className:e.className};n(o,a),t(o,r),e.className=o.className}function r(a,r){var o,l;return o=e(a,r),l=o?n:t,l(a,r),!o}return{has:e,add:t,remove:n,swap:a,toggle:r}}(),dom:function(){function e(){var e,t,n;return 1===arguments.length?(e=document.documentElement,t=arguments[0]):(e=arguments[0],t=arguments[1]),e&&e.querySelectorAll&&(n=e.querySelectorAll(t)),n}function t(){var t=e.apply(this,arguments);return t&&t.length&&(t=t[t.length-1]),t}return{get:t,getAll:e}}(),position:function(){function e(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}function t(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}return{getOffX:e,getOffY:t}}(),style:function(){function t(t,n){var a;return t.currentStyle?a=t.currentStyle[n]:e.getComputedStyle&&(a=document.defaultView.getComputedStyle(t,null).getPropertyValue(n)),a}return{get:t}}(),events:function(){var t,n,a;return t=function(t,a,r){var o={detach:function(){return n(t,a,r)}};return e.addEventListener?t.addEventListener(a,r,!1):t.attachEvent("on"+a,r),o},n=void 0!==e.removeEventListener?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)},a=function(e){return e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),!1},{add:t,preventDefault:a,remove:n}}(),features:function(){function t(e){var t=i.style[e];return void 0!==t?e:null}function n(e){try{i.style[u]=e}catch(t){return!1}return!!i.style[u]}var a,r,o,l,s,i,u;return i=document.createElement("div"),r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null,a=r?function(){return r.apply(e,arguments)}:null,o={transform:{ie:t("-ms-transform"),moz:t("MozTransform"),opera:t("OTransform"),webkit:t("webkitTransform"),w3:t("transform"),prop:null},rotate:{has3D:!1,prop:null},getAnimationFrame:a},o.transform.prop=o.transform.w3||o.transform.moz||o.transform.webkit||o.transform.ie||o.transform.opera,o.transform.prop&&(u=o.transform.prop,s={css_2d:"rotate(0deg)",css_3d:"rotate3d(0,0,0,0deg)"},n(s.css_3d)?(o.rotate.has3D=!0,l="rotate3d"):n(s.css_2d)&&(l="rotate"),o.rotate.prop=l),i=null,o}()},t=function(t){function n(){function t(){return f.playlist}function n(e){var n,a;return null===f.selectedIndex?e:(n=t(),e=void 0!==e?e:f.selectedIndex,e=Math.max(0,Math.min(e,n.length)),a=n[e])}function a(e){var n,a,r,o;if(o=-1,n=t())for(a=0,r=n.length;r>a;a++)if(n[a]===e){o=a;break}return o}function o(){return null!==f.selectedIndex&&f.selectedIndex++,f.playlist.length>1?f.selectedIndex>=f.playlist.length&&(f.loopMode?f.selectedIndex=0:f.selectedIndex--):f.selectedIndex=null,n()}function l(){return f.selectedIndex--,f.selectedIndex<0&&(f.loopMode?f.selectedIndex=f.playlist.length-1:f.selectedIndex++),n()}function s(){var e,t,n;for(e=r.dom.getAll(p.playlist,"."+g.selected),t=0,n=e.length;n>t;t++)r.css.remove(e[t],g.selected)}function i(e){var t;s(),e&&r.css.add(e,g.selected),t=a(e),f.selectedIndex=t}function u(){var e,t;return e=n(),e&&(t=e.getElementsByTagName("a")[0].href),t}function d(){return p.playlist?void(f.playlist=p.playlist.getElementsByTagName("li")):(e.console&&console.warn&&console.warn("refreshDOM(): playlist node not found?"),!1)}function c(){p.playlistTarget=r.dom.get(p.o,".sm2-playlist-target"),p.playlistContainer=r.dom.get(p.o,".sm2-playlist-drawer"),p.playlist=r.dom.get(p.o,".sm2-playlist-bd")}function m(){c(),d()}var f;return f={playlist:[],selectedIndex:0,loopMode:!1,timer:null},m(),{data:f,refresh:d,getNext:o,getPrevious:l,getItem:n,getURL:u,select:i}}function a(e,t){var n=Math.floor(e/1e3),a=Math.floor(n/3600),r=Math.floor(n/60)-Math.floor(60*a),o=Math.floor(n-3600*a-60*r);return t?(a?a+":":"")+(a&&10>r?"0"+r:r)+":"+(10>o?"0"+o:o):{min:r,sec:o}}function o(e){var t=e.getElementsByTagName("a");t.length&&(e=t[0]),p.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li>'+e.innerHTML.replace(v.loadFailedCharacter,"")+"</li></ul>",p.playlistTarget.getElementsByTagName("li")[0].scrollWidth>p.playlistTarget.offsetWidth&&(p.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li><marquee>'+e.innerHTML+"</marquee></li></ul>")}function l(t){var n=soundManager.createSound({url:t,whileplaying:function(){var e=100,t,n;t=Math.min(e,Math.max(0,e*(this.position/this.durationEstimate)))+"%",n=Math.min(100,Math.max(0,100*this.position/this.durationEstimate))+"%",this.duration&&(p.progress.style.left=t,p.progressBar.style.width=n,p.time.innerHTML=a(this.position,!0))},onbufferchange:function(e){e?r.css.add(p.o,"buffering"):r.css.remove(p.o,"buffering")},onplay:function(){r.css.swap(p.o,"paused","playing")},onpause:function(){r.css.swap(p.o,"playing","paused")},onresume:function(){r.css.swap(p.o,"paused","playing")},whileloading:function(){this.isHTML5||(p.duration.innerHTML=a(this.durationEstimate,!0))},onload:function(e){e?p.duration.innerHTML=a(this.duration,!0):this._iO&&this._iO.onerror&&this._iO.onerror()},onerror:function(){var t,n,a;t=h.getItem(),t&&v.loadFailedCharacter&&(p.playlistTarget.innerHTML=p.playlistTarget.innerHTML.replace("<li>","<li>"+v.loadFailedCharacter+" "),h.data.playlist&&h.data.playlist[h.data.selectedIndex]&&(n=h.data.playlist[h.data.selectedIndex].getElementsByTagName("a")[0],a=n.innerHTML,-1===a.indexOf(v.loadFailedCharacter)&&(n.innerHTML=v.loadFailedCharacter+" "+a))),navigator.userAgent.match(/mobile/i)?x.next():(h.data.timer&&e.clearTimeout(h.data.timer),h.data.timer=e.setTimeout(x.next,1e3))},onstop:function(){r.css.remove(p.o,"playing")},onfinish:function(){var e,t;r.css.remove(p.o,"playing"),p.progress.style.left="0%",e=h.data.selectedIndex,t=h.getNext(),t&&h.data.selectedIndex!==e&&(h.select(t),o(t),this.play({url:h.getURL()}))}});return n}function s(e){return e&&(e.which&&2===e.which||void 0===e.which&&1!==e.button)?!0:void 0}function i(t){var n,a;return a=t.target||t.srcElement,s(t)?!0:("a"!==a.nodeName.toLowerCase()&&(n=a.getElementsByTagName("a"),n&&n.length&&(a=a.getElementsByTagName("a")[0])),r.css.has(a,"sm2-volume-control")?(M.volume.x=r.position.getOffX(a),M.volume.y=r.position.getOffY(a),M.volume.width=a.offsetWidth,M.volume.height=a.offsetHeight,M.volume.backgroundSize=parseInt(r.style.get(a,"background-size"),10),e.navigator.userAgent.match(/msie|trident/i)&&(M.volume.backgroundSize=M.volume.backgroundSize/M.volume.width*100),r.events.add(document,"mousemove",x.adjustVolume),r.events.add(document,"mouseup",x.releaseVolume),x.adjustVolume(t)):void 0)}function u(e){soundManager.canPlayURL(e.href)&&(y||(y=l(e.href)),y.stop(),h.select(e.parentNode),o(e.parentNode),y.play({url:e.href,position:0}))}function d(t){var n,a,o,l,s,i,d;if(n=t||e.event,a=n.target||n.srcElement,a&&a.nodeName){if(l=a.nodeName.toLowerCase(),"a"!==l&&a.parentNode){do a=a.parentNode,l=a.nodeName.toLowerCase();while("a"!==l&&a.parentNode);if(!a)return!1}if("a"===l&&(i=a.href,soundManager.canPlayURL(i)?r.css.has(a,"sm2-exclude")||(u(a),d=!0):(o=a.href.lastIndexOf("#"),-1!==o&&(s=a.href.substr(o+1),s&&x[s]&&(d=!0,x[s](t)))),d))return r.events.preventDefault(n)}}function c(e){var t,n,a,o,l,s;return t=p.progressTrack,n=r.position.getOffX(t),a=t.offsetWidth,o=e.clientX-n,l=o/a,s=y,s&&s.duration&&(s.setPosition(s.duration*l),s._iO.whileplaying.apply(s)),e.preventDefault&&e.preventDefault(),!1}function m(e){return r.events.remove(document,"mousemove",c),r.css.remove(p.o,"grabbing"),e.preventDefault&&e.preventDefault(),r.events.remove(document,"mouseup",m),!1}function f(){t||console.warn("init(): No playerNode element?"),p.o=t,e.navigator.userAgent.match(/msie [678]/i)&&r.css.add(p.o,g.legacy),e.navigator.userAgent.match(/mobile/i)&&r.css.add(p.o,g.noVolume),p.progress=r.dom.get(p.o,".sm2-progress-ball"),p.progressTrack=r.dom.get(p.o,".sm2-progress-track"),p.progressBar=r.dom.get(p.o,".sm2-progress-bar"),p.volume=r.dom.get(p.o,"a.sm2-volume-control"),p.duration=r.dom.get(p.o,".sm2-inline-duration"),p.time=r.dom.get(p.o,".sm2-inline-time"),h=new n,w=h.getItem(0),h.select(w),o(w),r.events.add(p.o,"mousedown",i),r.events.add(p.o,"click",d),r.events.add(p.progressTrack,"mousedown",function(e){return s(e)?!0:(r.css.add(p.o,"grabbing"),r.events.add(document,"mousemove",c),r.events.add(document,"mouseup",m),c(e))})}var g,p,v,h,y,x,M,w;g={disabled:"disabled",selected:"selected",active:"active",legacy:"legacy",noVolume:"no-volume"},p={o:null,playlist:null,playlistTarget:null,playlistContainer:null,time:null,player:null,progress:null,progressTrack:null,progressBar:null,duration:null,volume:null},v={loadFailedCharacter:'<span title="Failed to load/play." class="load-error">âœ–</span>'},M={volume:{x:0,y:0,width:0,height:0,backgroundSize:0}},x={play:function(e){var t,n;t=e.target||e.srcElement,n=t.href,-1!==n.indexOf("#")&&(n=p.playlist.getElementsByTagName("a")[0].href),y||(y=l(n)),y.togglePause()},next:function(){var t,n;h.data.timer&&(e.clearTimeout(h.data.timer),h.data.timer=null),n=h.data.selectedIndex,t=h.getNext(!0),t&&h.data.selectedIndex!==n&&u(t.getElementsByTagName("a")[0])},prev:function(){var e,t;t=h.data.selectedIndex,e=h.getPrevious(),e&&h.data.selectedIndex!==t&&u(e.getElementsByTagName("a")[0])},shuffle:function(e){var t=e.target||e.srcElement;r.css.has(t.parentNode,g.disabled)||(r.css.toggle(t.parentNode,g.active),h.data.shuffleMode=!h.data.shuffleMode)},repeat:function(e){var t=e.target||e.srcElement;r.css.has(t,g.disabled)||(r.css.toggle(t.parentNode,g.active),h.data.loopMode=!h.data.loopMode)},menu:function(){var e;e=r.css.toggle(p.o,"playlist-open"),p.playlistContainer.style.height=(e?p.playlistContainer.scrollHeight:0)+"px"},adjustVolume:function(e){var t,n,a,o,l,s;return l=0,o=p.volume,t=M.volume.backgroundSize,t=100-t,n=t/2,l=Math.max(0,Math.min(1,(e.clientX-M.volume.x)/M.volume.width)),o.style.clip="rect(0px, "+M.volume.width*l+"px, "+M.volume.height+"px, "+M.volume.width*(n/100)+"px)",a=n/100*M.volume.width,s=Math.max(0,Math.min(1,(e.clientX-M.volume.x-a)/(M.volume.width-2*a))),y&&y.setVolume(100*s),r.events.preventDefault(e)},releaseVolume:function(){r.events.remove(document,"mousemove",x.adjustVolume),r.events.remove(document,"mouseup",x.releaseVolume)}},f()},e.sm2BarPlayers=n,e.SM2BarPlayer=t}(window);